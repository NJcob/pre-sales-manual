<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Sales Manual E-Learning</title>
    <link rel="icon" type="image/x-icon" href="image/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#0F172A',
                        'secondary': '#1E293B',
                        'accent': '#3B82F6',
                        'accent-dark': '#1D4ED8',
                        'success': '#10B981',
                        'warning': '#F59E0B',
                        'danger': '#EF4444',
                        'surface': '#F8FAFC',
                        'surface-dark': '#E2E8F0',
                        'glass': 'rgba(255, 255, 255, 0.08)',
                        'glass-border': 'rgba(255, 255, 255, 0.12)',
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 20px -5px rgba(0, 0, 0, 0.04)',
                        'strong': '0 10px 40px -10px rgba(0, 0, 0, 0.15), 0 20px 25px -5px rgba(0, 0, 0, 0.1)',
                        'glow': '0 0 0 1px rgba(59, 130, 246, 0.05), 0 1px 3px 0 rgba(59, 130, 246, 0.1), 0 4px 6px 0 rgba(59, 130, 246, 0.05)',
                        'glow-strong': '0 0 0 1px rgba(59, 130, 246, 0.15), 0 4px 20px 0 rgba(59, 130, 246, 0.15)',
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'mesh-pattern': 'radial-gradient(circle at 1px 1px, rgba(59,130,246,0.15) 1px, transparent 0)',
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
   
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
   
    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
        min-height: 100vh;
        color: #0F172A;
        overflow-x: hidden;
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    }

    /* Background Pattern */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: 40px 40px;
        background-image: radial-gradient(circle at 1px 1px, rgba(59,130,246,0.08) 1px, transparent 0);
        pointer-events: none;
        z-index: -1;
    }
    
    .section-title {
        background: linear-gradient(135deg, #1E293B 0%, #3B82F6 50%, #1D4ED8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        position: relative;
    }
    
    .card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform, box-shadow;
        position: relative;
        overflow: hidden;
    }

    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.3), transparent);
        opacity: 0;
        transition: opacity 0.4s ease;
    }
    
    .card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12), 0 8px 32px rgba(59, 130, 246, 0.08);
        border-color: rgba(59, 130, 246, 0.2);
    }

    .card:hover::before {
        opacity: 1;
    }
    
    .sidebar {
        background: linear-gradient(145deg, #0F172A 0%, #1E293B 100%);
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: width;
        box-shadow: 4px 0 40px rgba(0, 0, 0, 0.1);
    }
    
    .sidebar.collapsed {
        width: 80px;
    }
    
    .sidebar.collapsed .sidebar-text {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s ease;
    }
    
    .sidebar-text {
        opacity: 1;
        visibility: visible;
        transition: opacity 0.3s ease 0.1s;
    }

    .nav-item {
        position: relative;
        overflow: hidden;
        border-radius: 16px;
        transition: all 0.3s ease;
    }

    .nav-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        width: 3px;
        height: 0;
        background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        transform: translateY(-50%);
        transition: height 0.3s ease;
        border-radius: 2px;
    }

    .nav-item:hover::before {
        height: 60%;
    }

    .nav-item.active::before {
        height: 80%;
    }

    .nav-item:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateX(4px);
    }

    .nav-item.active {
        background: rgba(59, 130, 246, 0.15);
        border: 1px solid rgba(59, 130, 246, 0.2);
    }
    
    .progress-ring {
        transform: rotate(-90deg);
        filter: drop-shadow(0 4px 8px rgba(59, 130, 246, 0.3));
    }
    
    .progress-ring__circle {
        transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        transform-origin: 50% 50%;
    }
    
    .modal-backdrop {
        backdrop-filter: blur(12px);
        background: rgba(15, 23, 42, 0.4);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .modal-content {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 25px 80px rgba(0, 0, 0, 0.15);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .fade-in {
        animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .slide-up {
        animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes fadeIn {
        from { 
            opacity: 0;
            transform: translateY(10px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes slideUp {
        from { 
            opacity: 0;
            transform: translateY(30px) scale(0.95);
        }
        to { 
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    .loading-spinner {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Enhanced Button Styles */
    .btn-primary {
        background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        border: 1px solid rgba(59, 130, 246, 0.3);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
    }

    .btn-primary:hover::before {
        left: 100%;
    }

    .btn-primary:hover {
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        transform: translateY(-2px);
    }

    .btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
    }

    .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    /* Enhanced Input Styles */
    .input-field {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border: 1.5px solid rgba(59, 130, 246, 0.1);
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }

    .input-field:focus {
        border-color: #3B82F6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 4px 15px rgba(59, 130, 246, 0.1);
        background: rgba(255, 255, 255, 0.95);
    }

    /* Smooth scrollbars */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    
    ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
    }
    
    ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        border-radius: 8px;
        border: 2px solid transparent;
        background-clip: padding-box;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #1D4ED8, #1E40AF);
        background-clip: padding-box;
    }
    
    /* Performance optimizations */
    .gpu-accelerated {
        transform: translateZ(0);
        backface-visibility: hidden;
        perspective: 1000px;
        will-change: transform;
    }

    /* Reduce motion for performance */
    @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Optimize reflows */
    .card, .nav-item, .btn-primary, .btn-secondary {
        contain: layout style paint;
    }

    /* Floating Action Buttons */
    .floating-action-btn {
        position: fixed;
        right: 2rem;
        z-index: 40;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #studyNotesContainer {
        bottom: 6rem;
    }

    #glossaryContainer {
        bottom: 2rem;
    }

    .floating-action-btn:hover {
        transform: translateY(-2px);
    }

    /* Streak Counter */
    .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
        
    .streak-day {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
    }
        
    .streak-day.active {
        background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        border-color: rgba(59, 130, 246, 0.3);
    }
        
    .streak-day.today {
        background: linear-gradient(135deg, #F59E0B, #D97706);
        box-shadow: 0 4px 20px rgba(245, 158, 11, 0.5);
        animation: pulse 2s infinite;
        border-color: rgba(245, 158, 11, 0.3);
    }
        
    .streak-day:hover {
        transform: scale(1.15);
        z-index: 10;
    }
        
    .fire-animation {
        background: linear-gradient(45deg, #F59E0B, #D97706, #92400E);
        background-size: 400% 400%;
        animation: gradient 2s ease infinite;
    }
        
    @keyframes gradient {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
        
    .number-counter {
        font-variant-numeric: tabular-nums;
        font-weight: 600;
    }
        
    .progress-ring {
        transition: stroke-dashoffset 0.8s ease-in-out;
    }

    /* Enhanced Card Hover Effects */
    .hover-lift {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .hover-lift:hover {
        transform: translateY(-6px);
    }

    /* Tab Enhancements */
    .tab-active {
        position: relative;
    }

    .tab-active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        height: 3px;
        background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        border-radius: 2px;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    /* Enhanced Drop Zone */
    .drop-zone {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
    }

    .drop-zone.drag-over {
        background: rgba(59, 130, 246, 0.1);
        border-color: #3B82F6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        transform: scale(1.02);
    }

    /* Status Indicators */
    .status-indicator {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        position: relative;
    }

    .status-dot.active {
        background: #10B981;
        box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
    }

    .status-dot.active::before {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: 50%;
        background: inherit;
        opacity: 0.3;
        animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    @keyframes ping {
        75%, 100% {
            transform: scale(2);
            opacity: 0;
        }
    }

    /* Glassmorphism Effects */
    .glass-panel {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    /* Enhanced Animations */
    .animate-fade-in-up {
        animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Style for Charts */
    .card {
        background: white;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .glass-panel {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-primary {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    }

    .btn-secondary {
        background: #f3f4f6;
        border: 1px solid #d1d5db;
    }

    .text-primary {
        color: #1f2937;
    }

    .text-success {
        color: #10b981;
    }

    .text-danger {
        color: #ef4444;
    }

    .text-accent {
        color: #3b82f6;
    }

    .drop-zone {
        transition: all 0.3s ease;
    }

    .drop-zone.drag-over {
        border-color: #3b82f6;
        background-color: rgba(59, 130, 246, 0.05);
    }

    .loading-spinner {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .shadow-medium {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .shadow-glow {
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
    }

    .gpu-accelerated {
        transform: translateZ(0);
        will-change: transform;
}
    </style>
</head>
<body class="min-h-screen flex">
    <!-- Sidebar Navigation -->
    <div class="sidebar fixed top-0 left-0 h-full w-64 p-6 flex flex-col z-50 gpu-accelerated" id="sidebar">
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-accent to-accent-dark rounded-xl flex items-center justify-center shadow-glow">
                    <img src="image/Rebus Holdings Logo.png" alt="Logo" class="w-6 h-6 rounded" onerror="this.style.display='none'; this.parentNode.innerHTML='<span class=\'text-white font-bold text-xs\'>RH</span>'">
                </div>
                <div class="sidebar-text">
                    <h1 class="text-white font-bold text-lg">Pre-Sales Manual</h1>
                    <p class="text-gray-400 text-xs">CloseoutSoft Training</p>
                </div>
            </div>
        </div>
        
        <nav class="flex-1 space-y-2">
            <a href="#dashboard" class="nav-item flex items-center py-4 px-4 mb-1 rounded-xl text-white transition-all" onclick="showSection('dashboard')">
                <div class="w-5 h-5 mr-3 flex-shrink-0 text-accent">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                </div>
                <span class="sidebar-text font-medium">Dashboard</span>
            </a>
            
            <a href="#my-learning" class="nav-item flex items-center py-4 px-4 mb-1 rounded-xl text-white transition-all" onclick="showSection('my-learning')">
                <div class="w-5 h-5 mr-3 flex-shrink-0 text-accent">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
                <span class="sidebar-text font-medium">My Learning</span>
            </a>

            <a href="#study-notes" class="nav-item flex items-center py-4 px-4 mb-1 rounded-xl text-white transition-all" onclick="openNotesModal()" data-search="study notes">
                <div class="w-5 h-5 mr-3 flex-shrink-0 text-accent">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
                <span class="sidebar-text font-medium">Study Notes</span>
            </a>

            <a href="#glossary" class="nav-item flex items-center py-4 px-4 mb-1 rounded-xl text-white transition-all" onclick="activateAction('glossary')" data-search="glossary">
                <div class="w-5 h-5 mr-3 flex-shrink-0 text-accent">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </div>
                <span class="sidebar-text font-medium">Glossary</span>
            </a>
        </nav>

        <div class="sidebar-text mt-auto pt-4 border-t border-glass-border">
            <div class="status-indicator text-sm text-gray-400">
                <div class="status-dot active"></div>
                <span>Learning Session Active</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 ml-64 p-8 min-h-screen transition-all duration-300 gpu-accelerated" id="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <!-- Header Section -->
            <div class="mb-8">
                <h1 class="text-5xl font-bold section-title mb-3 tracking-tight">Learning Dashboard</h1>
                <p class="text-lg text-gray-600 font-medium">Track your progress and continue your CloseoutSoft mastery journey</p>
            </div>

            <!-- Stats Overview -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="card p-6 hover-lift">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600 mb-1">Completed Lessons</p>
                            <p id="stats-lessons" class="text-2xl font-bold text-primary number-counter">0/8</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-success to-green-600 rounded-xl flex items-center justify-center shadow-medium">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="card p-6 hover-lift">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600 mb-1">Current Streak</p>
                            <p id="stats-streak" class="text-2xl font-bold text-warning number-counter">0 days</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-warning to-orange-600 rounded-xl flex items-center justify-center shadow-medium">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="card p-6 hover-lift">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600 mb-1">Today</p>
                            <p id="calendar-day" class="text-4xl font-bold text-accent number-counter mb-1">01</p>
                            <p id="calendar-month-year" class="text-lg font-semibold text-gray-700">January 2024</p>
                            <p id="calendar-weekday" class="text-sm text-gray-500">Monday</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-accent to-accent-dark rounded-xl flex items-center justify-center shadow-glow">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="card p-6 hover-lift">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600 mb-1">Study Time</p>
                            <p class="text-2xl font-bold text-secondary number-counter">2.5h</p>
                        </div>
                        <div class="w-12 h-12 bg-gradient-to-br from-secondary to-gray-700 rounded-xl flex items-center justify-center shadow-medium">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Progress Overview -->
                <div class="card p-8 relative overflow-hidden group gpu-accelerated">
                    <div class="absolute inset-0 bg-gradient-to-br from-accent/5 to-accent-dark/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold text-primary">Progress Overview</h2>
                            <div class="w-8 h-8 bg-gradient-to-br from-accent to-accent-dark rounded-lg flex items-center justify-center shadow-glow">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                                </svg>
                            </div>
                        </div>
                        
                        <!-- Main Progress Display -->
                        <div class="flex flex-col lg:flex-row items-center gap-8 mb-8">
                            <div class="relative w-32 h-32">
                                <canvas id="progressChart" class="gpu-accelerated"></canvas>
                                <div class="absolute inset-0 flex flex-col items-center justify-center">
                                    <span id="progress-percentage" class="text-2xl font-bold text-accent">0%</span>
                                    <span class="text-xs text-gray-500 font-medium">Complete</span>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div id="progress-text" class="text-lg font-semibold text-primary mb-2">0/8 Lessons Completed</div>
                                <p class="text-gray-600 mb-4">You're making excellent progress! Keep up the momentum to master CloseoutSoft.</p>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Next Milestone</span>
                                        <span class="font-semibold text-accent">50% Complete</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-gradient-to-r from-accent to-accent-dark h-2 rounded-full transition-all duration-1000" style="width: 25%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Learning Statistics Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200" data-metric="study-time">
                                <div class="flex items-center gap-2 mb-2">
                                    <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <span class="text-xs font-semibold text-blue-600">Study Time</span>
                                </div>
                                <div class="text-xl font-bold text-blue-700">0h</div>
                                <div class="text-xs text-blue-500">This week</div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl border border-green-200" data-metric="quiz-score">
                                <div class="flex items-center gap-2 mb-2">
                                    <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <span class="text-xs font-semibold text-green-600">Quiz Score</span>
                                </div>
                                <div class="text-xl font-bold text-green-700">0%</div>
                                <div class="text-xs text-green-500">Average</div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200" data-metric="streak">
                                <div class="flex items-center gap-2 mb-2">
                                    <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                    <span class="text-xs font-semibold text-purple-600">Streak</span>
                                </div>
                                <div class="text-xl font-bold text-purple-700">0</div>
                                <div class="text-xs text-purple-500">Days active</div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl border border-orange-200" data-metric="focus-area">
                                <div class="flex items-center gap-2 mb-2">
                                    <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                                    </svg>
                                    <span class="text-xs font-semibold text-orange-600">Focus Area</span>
                                </div>
                                <div class="text-sm font-bold text-orange-700">Foundation</div>
                                <div class="text-xs text-orange-500">Knowledge</div>
                            </div>
                        </div>

                        <!-- Recent Achievements -->
                        <div class="mb-6">
                            <h3 class="text-lg font-bold text-primary mb-4">Recent Achievements</h3>
                            <div class="flex flex-wrap gap-3" data-section="achievements">
                                <div class="flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200">
                                    <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                        <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                        </svg>
                                    </div>
                                    <span class="text-sm font-medium text-gray-600">Complete your first lesson to unlock achievements</span>
                                </div>
                            </div>
                        </div>

                        <!-- Learning Path Progress -->
                        <div class="mb-6">
                            <h3 class="text-lg font-bold text-primary mb-4">Learning Path Progress</h3>
                            <div class="space-y-3" data-section="learning-path">
                                <div class="flex items-center gap-3">
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <span class="text-sm font-medium text-gray-700">Foundation Knowledge</span>
                                    <div class="flex-1 bg-gray-200 rounded-full h-1.5 ml-2">
                                        <div class="bg-gray-300 h-1.5 rounded-full transition-all duration-1000" style="width: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-500">Upcoming</span>
                                </div>
                                
                                <div class="flex items-center gap-3">
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <span class="text-sm font-medium text-gray-700">Product Mastery</span>
                                    <div class="flex-1 bg-gray-200 rounded-full h-1.5 ml-2">
                                        <div class="bg-gray-300 h-1.5 rounded-full transition-all duration-1000" style="width: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-500">Locked</span>
                                </div>
                                
                                <div class="flex items-center gap-3">
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <span class="text-sm font-medium text-gray-700">Sales Excellence</span>
                                    <div class="flex-1 bg-gray-200 rounded-full h-1.5 ml-2">
                                        <div class="bg-gray-300 h-1.5 rounded-full transition-all duration-1000" style="width: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-500">Locked</span>
                                </div>
                                
                                <div class="flex items-center gap-3">
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <span class="text-sm font-medium text-gray-700">Advanced Implementation</span>
                                    <div class="flex-1 bg-gray-200 rounded-full h-1.5 ml-2">
                                        <div class="bg-gray-300 h-1.5 rounded-full transition-all duration-1000" style="width: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-500">Locked</span>
                                </div>
                            </div>
                        </div>

                        <!-- Weekly Learning Goal -->
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-xl border border-indigo-200" data-section="weekly-goal">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-sm font-bold text-indigo-800">Weekly Learning Goal</h3>
                                <div class="flex items-center gap-1">
                                    <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                    <span class="text-xs font-semibold text-indigo-600" data-goal="active-days">0/5 days active</span>
                                </div>
                            </div>
                            <p class="text-sm text-indigo-700 mb-3">Complete 2 lessons and maintain daily engagement</p>
                            <div class="flex items-center gap-2">
                                <div class="flex-1 bg-indigo-200 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                                <span class="text-xs font-bold text-indigo-600" data-goal="percentage">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quiz Performance Analytics -->
                <div class="card p-3 relative overflow-hidden group gpu-accelerated">
                    <div class="absolute inset-0 bg-gradient-to-br from-success/5 to-green-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="relative">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-lg font-bold text-primary">Quiz Analytics</h2>
                            <div class="w-5 h-5 bg-gradient-to-br from-success to-green-600 rounded-lg flex items-center justify-center shadow-medium">
                                <svg class="w-2.5 h-2.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2-2V5a2 2 0 012-2h2a2 2 0 012 2v2m6 0V5a2 2 0 012-2h2a2 2 0 012 2v2m0 8v4a2 2 0 01-2 2h-2a2 2 0 01-2-2v-4"/>
                                </svg>
                            </div>
                        </div>
                        
                        <!-- File Drop Zone -->
                        <div id="dropZone" class="drop-zone border-2 border-dashed border-gray-300 rounded-lg p-3 text-center mb-3 transition-all duration-300"
                            ondrop="handleFileDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                            <div id="dropContent">
                                <div class="w-8 h-8 bg-gradient-to-br from-accent to-accent-dark rounded-lg flex items-center justify-center mx-auto mb-1 shadow-glow">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                </div>
                                <h3 class="text-sm font-semibold text-primary mb-1">Drop Your Quiz Results</h3>
                                <p class="text-xs text-gray-600 mb-2">Drag and drop your JSON file here</p>
                                <button class="btn-primary px-3 py-1.5 rounded-lg font-semibold text-white text-xs" onclick="document.getElementById('importFile').click()">
                                    Browse Files
                                </button>
                                <input type="file" id="importFile" accept=".json" style="display:none;" onchange="loadQuizResults(event)">
                                <p class="text-xs text-gray-400 mt-1">Supports JSON format only</p>
                            </div>
                            <div id="dropLoading" class="hidden">
                                <div class="loading-spinner rounded-full h-6 w-6 border-b-4 border-accent mx-auto mb-1"></div>
                                <p class="text-accent font-semibold text-xs">Processing...</p>
                            </div>
                        </div>

                        <!-- Results Display -->
                        <div id="resultsSection" class="fade-in">
                            <!-- Participant Info -->
                            <div id="participantInfo" class="glass-panel rounded-lg p-3 mb-3">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-bold text-primary text-sm">Participant Information</h4>
                                        <div id="participantDetails" class="text-gray-600 text-xs mt-1">Upload quiz data to see results</div>
                                    </div>
                                    <div class="text-right">
                                        <div id="overallScore" class="text-xl font-bold text-gray-400">--</div>
                                        <div class="text-xs text-gray-500 font-medium">Overall Score</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Performance Summary Cards -->
                            <div class="grid grid-cols-3 gap-2 mb-3">
                                <div class="glass-panel rounded-lg p-2 text-center">
                                    <div id="correctAnswers" class="text-lg font-bold text-gray-400">--</div>
                                    <div class="text-xs text-gray-600 font-medium">Correct</div>
                                </div>
                                <div class="glass-panel rounded-lg p-2 text-center">
                                    <div id="incorrectAnswers" class="text-lg font-bold text-gray-400">--</div>
                                    <div class="text-xs text-gray-600 font-medium">Incorrect</div>
                                </div>
                                <div class="glass-panel rounded-lg p-2 text-center">
                                    <div id="averageTime" class="text-lg font-bold text-gray-400">--</div>
                                    <div class="text-xs text-gray-600 font-medium">Avg. Time</div>
                                </div>
                            </div>

                            <!-- Charts -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                                <div class="glass-panel rounded-lg p-3">
                                    <h5 class="font-bold text-primary mb-2 text-xs">Score by Section</h5>
                                    <canvas id="quizChart" class="gpu-accelerated" style="height: 120px;"></canvas>
                                </div>
                                <div class="glass-panel rounded-lg p-3">
                                    <h5 class="font-bold text-primary mb-2 text-xs">Performance Distribution</h5>
                                    <canvas id="quizSummaryChart" class="gpu-accelerated" style="height: 120px;"></canvas>
                                </div>
                            </div>

                            <!-- Detailed Breakdown -->
                            <div class="glass-panel rounded-lg p-3 mb-3">
                                <h5 class="font-bold text-primary mb-2 text-xs">Question Analysis</h5>
                                <div id="questionBreakdown" class="space-y-1 max-h-24 overflow-y-auto">
                                    <div class="text-xs text-gray-500">Upload quiz data to see detailed breakdown</div>
                                </div>
                            </div>

                            <!-- Actions -->
                            <div class="flex gap-2">
                                <button onclick="exportResults()" class="btn-primary px-3 py-1.5 rounded-lg font-semibold text-white text-xs opacity-50 cursor-not-allowed" disabled>
                                    Export Report
                                </button>
                                <button onclick="clearResults()" class="btn-secondary px-3 py-1.5 rounded-lg font-semibold text-gray-700 text-xs opacity-50 cursor-not-allowed" disabled>
                                    Clear Results
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secondary Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                <!-- Enhanced Streak Tracker -->
                <div class="card p-8 relative overflow-hidden group gpu-accelerated hover:shadow-2xl transition-all duration-500 hover:-translate-y-1">
                    <!-- Animated background with multiple gradients -->
                    <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 via-red-500/5 to-yellow-500/10 opacity-0 group-hover:opacity-100 transition-all duration-700"></div>
                    <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 animate-pulse"></div>
                    
                    <!-- Floating particles -->
                    <div class="absolute top-4 left-6 w-1 h-1 bg-orange-400 rounded-full animate-ping" style="animation-delay: 0s;"></div>
                    <div class="absolute top-8 right-12 w-1.5 h-1.5 bg-red-400 rounded-full animate-ping" style="animation-delay: 1s;"></div>
                    <div class="absolute bottom-6 left-1/3 w-1 h-1 bg-yellow-400 rounded-full animate-ping" style="animation-delay: 2s;"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-xl font-bold bg-gradient-to-r from-gray-800 via-gray-700 to-gray-600 bg-clip-text text-transparent">
                                    Learning Streak
                                </h2>
                                <div class="h-0.5 w-16 bg-gradient-to-r from-orange-400 to-red-500 rounded-full mt-2 transform origin-left group-hover:scale-x-125 transition-transform duration-500"></div>
                            </div>
                            
                            <!-- Enhanced flame icon with multiple effects -->
                            <div class="relative">
                                <!-- Pulse rings -->
                                <div class="absolute inset-0 w-8 h-8 bg-gradient-to-br from-orange-400/30 to-red-500/30 rounded-lg animate-ping"></div>
                                <div class="absolute inset-0 w-8 h-8 bg-gradient-to-br from-orange-400/20 to-red-500/20 rounded-lg animate-pulse"></div>
                                
                                <!-- Main icon with enhanced styling -->
                                <div class="relative w-8 h-8 bg-gradient-to-br from-orange-400 via-red-500 to-yellow-500 rounded-lg flex items-center justify-center shadow-lg hover:shadow-orange-500/30 transition-all duration-300 hover:scale-110 hover:rotate-3">
                                    <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-lg"></div>
                                    <svg class="w-4 h-4 text-white relative z-10 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Enhanced streak display -->
                        <div class="text-center mb-6">
                            <div class="relative mb-4">
                                <div id="streak" class="text-4xl font-black bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500 bg-clip-text text-transparent mb-2 hover:scale-105 transition-transform duration-300 cursor-default">
                                    7 days
                                </div>
                                <!-- Shimmer effect -->
                                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 opacity-0 group-hover:opacity-100 group-hover:translate-x-full transition-all duration-1000"></div>
                            </div>
                            
                            <!-- Enhanced message with background -->
                            <div class="inline-flex items-center gap-2 bg-gradient-to-r from-green-50 via-blue-50 to-purple-50 rounded-full px-4 py-2 border border-white/50 shadow-sm hover:shadow-md transition-all duration-300">
                                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <p id="streakMessage" class="text-gray-700 text-sm font-semibold">Keep the momentum going! 🚀</p>
                            </div>
                            
                            <!-- Progress indicator -->
                            <div class="mt-4 bg-gray-200 rounded-full h-2 overflow-hidden shadow-inner">
                                <div class="bg-gradient-to-r from-orange-400 via-red-500 to-yellow-500 h-full rounded-full transition-all duration-1000 ease-out hover:from-orange-300 hover:to-yellow-400" style="width: 70%; animation: pulse 2s infinite;"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2 opacity-75 group-hover:opacity-100 transition-opacity duration-300">7/10 days to next milestone ⭐</p>
                        </div>
                        
                        <!-- Enhanced calendar -->
                        <div>
                            <div class="flex items-center justify-center mb-3">
                                <div class="text-xs font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-full">This Week</div>
                            </div>
                            <div id="streakCalendar" class="grid grid-cols-7 gap-2 justify-items-center">
                                <!-- Calendar will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Weekly Activity Chart -->
                <div class="lg:col-span-2 card p-8 relative overflow-hidden group gpu-accelerated hover:shadow-2xl transition-all duration-500 hover:-translate-y-1">
                    <!-- Multi-layered animated background -->
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-all duration-700"></div>
                    <div class="absolute inset-0 bg-gradient-to-tl from-cyan-500/5 via-transparent to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"></div>
                    
                    <!-- Floating elements -->
                    <div class="absolute top-6 right-8 w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                    <div class="absolute bottom-8 left-6 w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.5s;"></div>
                    <div class="absolute top-1/2 left-8 w-1 h-1 bg-indigo-400 rounded-full animate-bounce" style="animation-delay: 1s;"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-xl font-bold bg-gradient-to-r from-gray-800 via-gray-700 to-gray-600 bg-clip-text text-transparent">
                                    Weekly Activity
                                </h2>
                                <div class="h-0.5 w-20 bg-gradient-to-r from-blue-400 via-purple-500 to-indigo-500 rounded-full mt-2 transform origin-left group-hover:scale-x-125 transition-transform duration-500"></div>
                                <p class="text-xs text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-500">Your learning journey visualization ✨</p>
                            </div>
                            
                            <!-- Enhanced chart icon -->
                            <div class="relative">
                                <!-- Glow effect -->
                                <div class="absolute inset-0 w-8 h-8 bg-gradient-to-br from-blue-400/20 to-purple-500/20 rounded-lg blur-sm animate-pulse"></div>
                                
                                <!-- Main icon -->
                                <div class="relative w-8 h-8 bg-gradient-to-br from-blue-400 via-purple-500 to-indigo-500 rounded-lg flex items-center justify-center shadow-lg hover:shadow-blue-500/30 transition-all duration-300 hover:scale-110 hover:-rotate-3">
                                    <div class="absolute inset-0 bg-gradient-to-br from-white/30 to-transparent rounded-lg"></div>
                                    <svg class="w-4 h-4 text-white relative z-10 hover:animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick stats cards -->
                        <div class="grid grid-cols-3 gap-3 mb-6 opacity-0 group-hover:opacity-100 transition-all duration-700 transform translate-y-2 group-hover:translate-y-0">
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-3 border border-green-100/50 hover:border-green-200 transition-colors duration-300 hover:shadow-sm">
                                <div class="text-lg font-bold text-green-600">24h</div>
                                <div class="text-xs text-green-600/80">This Week</div>
                            </div>
                            <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-3 border border-blue-100/50 hover:border-blue-200 transition-colors duration-300 hover:shadow-sm">
                                <div class="text-lg font-bold text-blue-600">89%</div>
                                <div class="text-xs text-blue-600/80">Complete</div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-3 border border-purple-100/50 hover:border-purple-200 transition-colors duration-300 hover:shadow-sm">
                                <div class="text-lg font-bold text-purple-600">+12%</div>
                                <div class="text-xs text-purple-600/80">Growth</div>
                            </div>
                        </div>
                        
                        <!-- Enhanced chart container -->
                        <div class="bg-gradient-to-br from-gray-50/80 to-white/80 rounded-2xl p-6 border border-gray-100/50 shadow-inner backdrop-blur-sm hover:from-gray-50 hover:to-white transition-all duration-500">
                            <canvas id="activityChart" class="w-full gpu-accelerated drop-shadow-sm" style="height: 200px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Motivational Quote -->
           <div class="card p-8 relative overflow-hidden group gpu-accelerated hover:shadow-2xl transition-all duration-500 hover:-translate-y-1">
                <!-- Multi-layered animated backgrounds -->
                <div class="absolute inset-0 bg-gradient-to-br from-purple-500/5 via-blue-500/5 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-all duration-700"></div>
                <div class="absolute inset-0 bg-gradient-to-tr from-cyan-400/5 via-transparent to-purple-400/5 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"></div>
                
                <!-- Animated top border with sparkle effect -->
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 via-blue-500 via-indigo-500 to-purple-600 group-hover:h-2 transition-all duration-500">
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"></div>
                </div>
                
                <!-- Floating sparkle particles -->
                <div class="absolute top-6 left-8 w-1 h-1 bg-purple-400 rounded-full animate-ping" style="animation-delay: 0s; animation-duration: 3s;"></div>
                <div class="absolute top-12 right-12 w-1.5 h-1.5 bg-blue-400 rounded-full animate-ping" style="animation-delay: 1s; animation-duration: 2s;"></div>
                <div class="absolute bottom-16 left-16 w-1 h-1 bg-indigo-400 rounded-full animate-ping" style="animation-delay: 2s; animation-duration: 4s;"></div>
                <div class="absolute top-1/3 right-6 w-0.5 h-0.5 bg-cyan-400 rounded-full animate-ping" style="animation-delay: 0.5s; animation-duration: 2.5s;"></div>
                
                <!-- Decorative elements -->
                <div class="absolute top-4 right-4 opacity-10 group-hover:opacity-20 transition-opacity duration-500">
                    <svg class="w-16 h-16 text-purple-300 animate-spin" style="animation-duration: 20s;" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
                    </svg>
                </div>
                
                <div class="relative z-10 text-center">
                    <!-- Enhanced header with icon -->
                    <div class="flex items-center justify-center gap-3 mb-8">
                        <!-- Glowing inspiration icon -->
                        <div class="relative">
                            <div class="absolute inset-0 w-12 h-12 bg-gradient-to-br from-purple-400/20 to-blue-500/20 rounded-full blur-sm animate-pulse"></div>
                            <div class="relative w-12 h-12 bg-gradient-to-br from-purple-400 via-blue-500 to-indigo-500 rounded-full flex items-center justify-center shadow-lg hover:shadow-purple-500/30 transition-all duration-300 hover:scale-110 hover:rotate-12">
                                <svg class="w-6 h-6 text-white animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                </svg>
                            </div>
                        </div>
                        
                        <div>
                            <h2 class="text-2xl font-bold bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 bg-clip-text text-transparent">
                                Daily Motivation
                            </h2>
                            <div class="h-0.5 w-24 bg-gradient-to-r from-purple-400 via-blue-500 to-indigo-500 rounded-full mt-2 mx-auto transform origin-center group-hover:scale-x-125 transition-transform duration-500"></div>
                        </div>
                    </div>
                    
                    <!-- Enhanced quote display -->
                    <div class="relative mb-8 group/quote">
                        <!-- Quote background glow -->
                        <div class="absolute inset-0 bg-gradient-to-r from-purple-100/50 via-blue-100/50 to-indigo-100/50 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                        
                        <!-- Quote marks decoration -->
                        <div class="absolute -top-4 -left-2 text-6xl text-purple-200 font-serif opacity-50 group-hover/quote:opacity-70 transition-opacity duration-300">"</div>
                        <div class="absolute -bottom-8 -right-2 text-6xl text-blue-200 font-serif opacity-50 group-hover/quote:opacity-70 transition-opacity duration-300 rotate-180">"</div>
                        
                        <div class="relative bg-gradient-to-br from-white/80 to-gray-50/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 shadow-inner hover:shadow-md transition-all duration-500 hover:border-purple-200/50">
                            <blockquote id="quote" class="text-xl font-medium bg-gradient-to-r from-gray-800 via-gray-700 to-gray-600 bg-clip-text text-transparent mb-4 leading-relaxed hover:from-purple-700 hover:to-blue-700 transition-all duration-500">
                                "Stay curious, keep learning!"
                            </blockquote>
                            
                            <!-- Author with enhanced styling -->
                            <div class="flex items-center justify-center gap-2 mt-4">
                                <div class="h-px w-8 bg-gradient-to-r from-transparent to-purple-300"></div>
                                <cite id="quoteAuthor" class="text-gray-600 font-semibold text-sm bg-gradient-to-r from-purple-600/80 to-blue-600/80 bg-clip-text hover:text-transparent transition-all duration-300">
                                    Albert Einstein
                                </cite>
                                <div class="h-px w-8 bg-gradient-to-l from-transparent to-purple-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced button with multiple effects -->
                    <div class="relative inline-block">
                        <!-- Button glow effect -->
                        <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-blue-500 rounded-xl blur-lg opacity-0 group-hover:opacity-30 transition-opacity duration-500"></div>
                        
                        <button onclick="newQuote()" class="relative px-8 py-4 bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-500 hover:from-purple-600 hover:via-blue-600 hover:to-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 transition-all duration-300 overflow-hidden group/btn">
                            <!-- Button shimmer effect -->
                            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-full transition-all duration-700"></div>
                            
                            <!-- Button content -->
                            <div class="relative flex items-center gap-3">
                                <svg class="w-5 h-5 transition-transform duration-300 group-hover/btn:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>New Quote</span>
                                
                                <!-- Sparkle on hover -->
                                <div class="absolute -top-1 -right-1 w-2 h-2 bg-yellow-300 rounded-full opacity-0 group-hover/btn:opacity-100 animate-ping transition-opacity duration-300"></div>
                            </div>
                        </button>
                    </div>
                    
                    <!-- Inspirational stats or badges -->
                    <div class="mt-6 flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100 transition-all duration-700 transform translate-y-2 group-hover:translate-y-0">
                        <div class="flex items-center gap-2 bg-gradient-to-r from-purple-50 to-blue-50 rounded-full px-3 py-1 border border-purple-100/50">
                            <div class="w-2 h-2 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"></div>
                            <span class="text-xs font-semibold text-purple-700">Daily Wisdom</span>
                        </div>
                        <div class="flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full px-3 py-1 border border-blue-100/50">
                            <div class="w-2 h-2 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse" style="animation-delay: 0.5s;"></div>
                            <span class="text-xs font-semibold text-blue-700">Stay Motivated</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Learning Section -->
        <div id="my-learning" class="section hidden">
            <div class="mb-12">
                <h1 class="text-6xl font-black section-title mb-4 tracking-tight bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 bg-clip-text text-transparent leading-tight">My Learning Journey</h1>
                <p class="text-xl text-gray-600 font-medium max-w-2xl">Continue your CloseoutSoft mastery with structured lessons and comprehensive assessments</p>
            </div>

            <!-- Current Lesson Card -->
            <div class="card p-0 mb-10 relative overflow-hidden group bg-white border border-gray-200 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2">
                <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-600"></div>
                <div class="absolute inset-0 bg-gradient-to-br from-blue-50/30 to-indigo-50/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                <div class="relative grid grid-cols-1 lg:grid-cols-5 gap-8 p-8">
                    <div class="lg:col-span-2">
                        <div class="relative bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl overflow-hidden group-hover:shadow-xl transition-all duration-300">
                            <img src="image/technology-solution-removebg-preview.png" alt="Lesson Thumbnail" class="w-full h-56 object-contain p-6 group-hover:scale-105 transition-transform duration-300" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-56 flex items-center justify-center text-gray-400\'><svg class=\'w-16 h-16\' fill=\'currentColor\' viewBox=\'0 0 24 24\'><path d=\'M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\'/></svg></div>'">
                            <div class="absolute inset-0 bg-gradient-to-t from-blue-500/5 via-transparent to-transparent rounded-2xl pointer-events-none"></div>
                        </div>
                    </div>
                    <div class="lg:col-span-3 flex flex-col justify-center">
                        <div class="mb-6">
                            <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-bold bg-gradient-to-r from-blue-500 to-indigo-600 text-white mb-4 shadow-lg">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                Current Lesson
                            </span>
                            <h3 id="currentLessonTitle" class="text-4xl font-bold text-gray-800 mb-4 leading-tight">Lesson 1: Introduction</h3>
                            <p class="text-lg text-gray-600 mb-8 leading-relaxed">Learn the core purpose and structure of CloseoutSoft platform and discover its key benefits for streamlined project management.</p>
                        </div>
                        <a id="currentLessonLink" href="lessons/lesson-1.html" class="inline-flex items-center gap-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1 w-fit">
                            Continue Learning
                            <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Lesson Roadmap -->
            <div class="card p-8 mb-10 bg-white border border-gray-200 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300">
                <div class="flex items-center justify-between mb-10">
                    <h2 class="text-3xl font-bold text-gray-800">Learning Roadmap</h2>
                    <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                        </svg>
                    </div>
                </div>
                <div id="roadmap" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"></div>
            </div>

            <!-- Quizzes & Tests -->
            <div class="card p-8 bg-white border border-gray-200 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300">
                <div class="flex items-center justify-between mb-10">
                    <h2 class="text-3xl font-bold text-gray-800">Assessments & Quizzes</h2>
                    <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                    </div>
                </div>
                <div id="quizzes" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Quiz items will be populated here -->
                    <div class="bg-white border-2 border-green-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 mb-4">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            Completed
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Introduction Quiz</h4>
                        <p class="text-gray-600 text-sm mb-4">Test your understanding of CloseoutSoft basics • 10 questions • 15 minutes</p>
                        <div class="text-green-600 font-bold">Score: 95% (19/20)</div>
                    </div>
                    
                    <div class="bg-white border-2 border-blue-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800 mb-4">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                            </svg>
                            Available
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Project Management Assessment</h4>
                        <p class="text-gray-600 text-sm mb-4">Evaluate your project creation skills • 15 questions • 25 minutes</p>
                        <button class="bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-bold text-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1 mt-2">
                            Start Assessment
                        </button>
                    </div>
                    
                    <div class="bg-white border-2 border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1 opacity-75">
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-600 mb-4">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                            </svg>
                            Locked
                        </div>
                        <h4 class="text-xl font-bold text-gray-500 mb-3">Advanced Features Test</h4>
                        <p class="text-gray-400 text-sm mb-4">Comprehensive evaluation • 20 questions • 35 minutes</p>
                    </div>
                    
                    <div class="bg-white border-2 border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1 opacity-75">
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-600 mb-4">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                            </svg>
                            Locked
                        </div>
                        <h4 class="text-xl font-bold text-gray-500 mb-3">Final Certification Exam</h4>
                        <p class="text-gray-400 text-sm mb-4">Complete certification • 50 questions • 90 minutes</p>
                    </div>
                </div>
            </div>
        </div>
    </div> 

    <!-- Study Notes Modal -->
    <div id="notesModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 opacity-0 invisible transition-all duration-300">
        <div class="flex items-start justify-center min-h-screen p-4 pt-4">
            <div id="notesModalContent" class="bg-white rounded-3xl shadow-2xl max-w-7xl w-full max-h-[95vh] flex flex-col transform scale-95 transition-transform duration-300">
                
                <!-- Modal Header -->
                <div class="flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0 bg-gradient-to-r from-purple-50 to-blue-50">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                            </svg>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">Study Notes</h2>
                            <p class="text-sm text-gray-500">Built in Study Notes | ClouseoutSoft</p>
                            <div class="flex items-center mt-1 space-x-2">
                                <div class="flex items-center space-x-1">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-xs text-gray-500">Active Session</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <!-- Progress Indicator (WIP)-->
                        <div class="flex items-center space-x-2 mr-4">
                            <div class="text-right">
                                <div class="text-sm font-semibold text-gray-900"></div>
                                <div class="text-xs text-gray-500"></div>
                            </div>
                        </div>
                        <button onclick="closeNotesModal()" class="p-2 hover:bg-white hover:shadow-md rounded-xl transition-all duration-200">
                            <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="flex border-b border-gray-200 px-6 flex-shrink-0 bg-white">
                    <button onclick="switchTab('notes')" id="notesTab" class="px-4 py-3 text-sm font-medium text-purple-600 border-b-2 border-purple-600 bg-white">
                        <div class="flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                            <span>Study Notes</span>
                        </div>
                    </button>
                    <button onclick="switchTab('ai-assistant')" id="aiAssistantTab" class="px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300">
                        <div class="flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                            <span>AI Study Assistant</span>
                            <div class="ml-2 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full">Not Implemented</div>
                        </div>
                    </button>
                    <button onclick="switchTab('resources')" id="resourcesTab" class="px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300">
                        <div class="flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                            </svg>
                            <span>Resources</span>
                            <div class="ml-2 px-2 py-0.5 text-xs bg-purple-100 text-purple-800 rounded-full">WIP</div>
                        </div>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="flex-1 overflow-hidden min-h-0">
                    <!-- Study Notes Tab -->
                    <div id="notesTabContent" class="h-full flex">
                        <!-- Notes List Sidebar -->
                        <div class="w-80 border-r border-gray-200 bg-gray-50 flex flex-col">
                            <!-- Sidebar Header -->
                            <div class="p-4 border-b border-gray-200">
                                <button onclick="createNewNote()" class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center mb-3">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                    </svg>
                                    New Note
                                </button>
                                
                                <!-- Search Bar -->
                                <div class="relative">
                                    <input type="text" placeholder="Search notes..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                    <svg class="w-4 h-4 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                    </svg>
                                </div>

                                <!-- Filter Buttons -->
                                <div class="flex space-x-2 mt-3">
                                    <button class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium">All</button>
                                    <button class="px-3 py-1 bg-gray-200 text-gray-600 rounded-full text-xs font-medium">Recent</button>
                                    <button class="px-3 py-1 bg-gray-200 text-gray-600 rounded-full text-xs font-medium">Starred</button>
                                </div>
                            </div>
                            
                            <!-- Notes List -->
                            <div id="notesList" class="flex-1 overflow-y-auto p-2">
                                <!-- Sample Notes -->
                                <div class="space-y-2">
                                    <div class="p-3 bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-medium text-gray-900 text-sm truncate">CloseoutSoft Overview</h4>
                                                <p class="text-xs text-gray-500 mt-1 line-clamp-2">Key features and benefits of the platform...</p>
                                                <div class="flex items-center mt-2 space-x-2">
                                                    <span class="text-xs text-gray-400">2 hours ago</span>
                                                    <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
                                                    <span class="text-xs text-gray-400">245 words</span>
                                                </div>
                                            </div>
                                            <svg class="w-4 h-4 text-yellow-500 flex-shrink-0 ml-2" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="p-3 bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-medium text-gray-900 text-sm truncate">QA/QC Procedures</h4>
                                                <p class="text-xs text-gray-500 mt-1 line-clamp-2">Quality assurance and quality control processes...</p>
                                                <div class="flex items-center mt-2 space-x-2">
                                                    <span class="text-xs text-gray-400">1 day ago</span>
                                                    <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
                                                    <span class="text-xs text-gray-400">189 words</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="p-3 bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-medium text-gray-900 text-sm truncate">Digital Submittal Process</h4>
                                                <p class="text-xs text-gray-500 mt-1 line-clamp-2">Step-by-step guide to digital submissions...</p>
                                                <div class="flex items-center mt-2 space-x-2">
                                                    <span class="text-xs text-gray-400">3 days ago</span>
                                                    <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
                                                    <span class="text-xs text-gray-400">312 words</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Empty state (hidden when notes exist) -->
                                <div class="text-center text-gray-500 mt-8 hidden">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    <p class="text-lg font-medium">No notes yet</p>
                                    <p class="text-sm">Create your first note to get started</p>
                                </div>
                            </div>
                        </div>

                        <!-- Note Editor -->
                        <div class="flex-1 flex flex-col min-w-0">
                            <!-- Editor Empty State -->
                            <div id="noteEditorEmpty" class="flex-1 flex items-center justify-center text-gray-500">
                                <div class="text-center">
                                    <svg class="w-24 h-24 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                    <h3 class="text-xl font-medium mb-2">Select a note to edit</h3>
                                    <p class="text-gray-400 mb-4">Or create a new note to get started</p>
                                    
                                    <!-- Quick Templates -->
                                    <div class="space-y-2">
                                        <h4 class="text-sm font-medium text-gray-600 mb-3">Quick Templates</h4>
                                        <button class="block w-full max-w-xs mx-auto px-4 py-2 text-left bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors">
                                            📝 Meeting Notes Template
                                        </button>
                                        <button class="block w-full max-w-xs mx-auto px-4 py-2 text-left bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors">
                                            📋 Lesson Summary Template
                                        </button>
                                        <button class="block w-full max-w-xs mx-auto px-4 py-2 text-left bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors">
                                            ❓ Q&A Template
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Note Editor Interface -->
                            <div id="noteEditor" class="flex-1 flex flex-col hidden min-h-0">
                                <!-- Note Title -->
                                <div id="noteTitleContainer" class="p-4 border-b border-gray-200 hidden">
                                    <input 
                                        id="noteTitle" 
                                        type="text" 
                                        placeholder="Note title..."
                                        class="w-full text-2xl font-bold border-none outline-none bg-transparent placeholder-gray-400"
                                        onchange="updateNoteTitle()"
                                    >
                                </div>

                                <!-- Editor Toolbar -->
                                <div id="editorToolbar" class="flex items-center gap-2 p-3 border-b border-gray-200 bg-gray-50 hidden flex-wrap">
                                    <button onclick="formatText('bold')" class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Bold">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/></svg>
                                    </button>
                                    <button onclick="formatText('italic')" class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Italic">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/></svg>
                                    </button>
                                    <button onclick="formatText('underline')" class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Underline">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/></svg>
                                    </button>
                                    <div class="w-px h-6 bg-gray-300 mx-1"></div>
                                    <button onclick="insertList('ul')" class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Bullet List">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/></svg>
                                    </button>
                                    <button onclick="insertList('ol')" class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Numbered List">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/></svg>
                                    </button>
                                    <div class="w-px h-6 bg-gray-300 mx-1"></div>
                                    <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Insert Link">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Insert Image">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                                    </button>
                                    <div class="w-px h-6 bg-gray-300 mx-1"></div>
                                    <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="Insert Code Block">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>
                                    </button>
                                </div>

                                <!-- Editor Content -->
                                <div class="flex-1 p-4 overflow-y-auto min-h-0">
                                    <div 
                                        id="noteContent" 
                                        contenteditable="true"
                                        class="min-h-full outline-none text-gray-800 leading-relaxed"
                                        placeholder="Start writing your notes..."
                                        oninput="updateWordCount()"
                                        style="min-height: 400px;"
                                    ></div>
                                </div>

                                <!-- Editor Footer -->
                                <div class="flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50 text-sm text-gray-500">
                                    <div class="flex items-center space-x-4">
                                        <span id="wordCount">0 words</span>
                                        <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
                                        <span>0 characters</span>
                                        <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
                                        <span>0 paragraphs</span>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <span id="lastSaved">Never saved</span>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-xs">Auto-save enabled</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Assistant Tab -->
                    <div id="aiAssistantTabContent" class="h-full flex hidden">
                        <div class="flex-1 flex flex-col">
                            <!-- AI Chat Header -->
                            <div class="p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-bold text-gray-900">AI Study Assistant</h3>
                                            <p class="text-sm text-gray-600">Get personalized help with CloseoutSoft concepts</p>
                                            <div class="flex items-center mt-1 space-x-2">
                                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                                <span class="text-xs text-gray-500">AI is ready to help</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Chat Controls -->
                                    <div class="flex items-center space-x-2">
                                        <button onclick="exportAIConversation()" class="p-2 text-gray-500 hover:text-blue-600 hover:bg-white rounded-lg transition-all" title="Export Conversation">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                        </button>
                                        <button onclick="clearAIChat()" class="p-2 text-gray-500 hover:text-red-600 hover:bg-white rounded-lg transition-all" title="Clear Chat">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Quick Actions -->
                            <div class="p-4 border-b border-gray-100 bg-gray-50">
                                <h4 class="text-sm font-semibold text-gray-700 mb-3">Quick Actions</h4>
                                <div class="grid grid-cols-2 gap-2 mb-4">
                                    <button onclick="askAI('Explain key CloseoutSoft features')" class="text-left p-3 bg-white rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 transition-all">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium text-gray-900">Key Features Summary</div>
                                                <div class="text-xs text-gray-500">Get an overview of main features</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAI('What are QA/QC procedures in CloseoutSoft?')" class="text-left p-3 bg-white rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 transition-all">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                                <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium text-gray-900">QA/QC Explained</div>
                                                <div class="text-xs text-gray-500">Learn about quality control</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAI('How does digital submittal process work?')" class="text-left p-3 bg-white rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 transition-all">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                                <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium text-gray-900">Digital Submittals</div>
                                                <div class="text-xs text-gray-500">Understand the process</div>
                                            </div>
                                        </div>
                                    </button>
                                    <button onclick="askAI('Create quiz questions for this lesson')" class="text-left p-3 bg-white rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 transition-all">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center">
                                                <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium text-gray-900">Practice Questions</div>
                                                <div class="text-xs text-gray-500">Generate study questions</div>
                                            </div>
                                        </div>
                                    </button>
                                </div>

                                <!-- Additional Quick Actions -->
                                <div class="grid grid-cols-3 gap-2">
                                    <button onclick="askAI('Explain user roles and responsibilities')" class="text-center p-2 bg-white rounded-lg hover:bg-gray-100 border border-gray-200 transition-all">
                                        <div class="text-xs font-medium text-gray-700">User Roles</div>
                                    </button>
                                    <button onclick="askAI('What are the main benefits?')" class="text-center p-2 bg-white rounded-lg hover:bg-gray-100 border border-gray-200 transition-all">
                                        <div class="text-xs font-medium text-gray-700">Benefits</div>
                                    </button>
                                    <button onclick="askAI('Help me study for the exam')" class="text-center p-2 bg-white rounded-lg hover:bg-gray-100 border border-gray-200 transition-all">
                                        <div class="text-xs font-medium text-gray-700">Exam Prep</div>
                                    </button>
                                </div>
                            </div>

                            <!-- AI Chat Messages -->
                            <div class="flex-1 overflow-y-auto p-4" id="aiChatMessages">
                                <div class="space-y-4">
                                    <!-- Welcome Message -->
                                    <div class="flex items-start space-x-3">
                                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4">
                                                <h4 class="font-semibold text-gray-900 mb-2">Welcome to your AI Study Assistant!</h4>
                                                <p class="text-gray-800 mb-3">I'm here to help you master CloseoutSoft concepts. I can:</p>
                                                <ul class="text-gray-700 text-sm space-y-1 mb-3">
                                                    <li>• Answer questions about the lesson content</li>
                                                    <li>• Create custom practice quizzes and flashcards</li>
                                                    <li>• Explain complex concepts in simple terms</li>
                                                    <li>• Help you prepare for assessments</li>
                                                    <li>• Provide real-world examples and use cases</li>
                                                </ul>
                                                <div class="bg-white rounded-lg p-3 border">
                                                    <p class="text-sm text-gray-600"><strong>Pro Tip:</strong> Try asking specific questions like "Can you give me 3 examples of QA/QC procedures?" or use the quick actions above!</p>
                                                </div>
                                            </div>
                                            <p class="text-xs text-gray-500 mt-1 flex items-center">
                                                <span class="w-2 h-2 bg-green-500 rounded-full mr-1"></span>
                                                AI Assistant • Ready to help
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Sample Conversation Starter -->
                                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                                <svg class="w-4 h-4 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium text-yellow-800">Popular Questions from Other Students:</div>
                                                <div class="mt-2 space-y-2">
                                                    <button class="block w-full text-left p-2 bg-white rounded border hover:bg-yellow-50 text-xs">
                                                        "What's the difference between QA and QC in CloseoutSoft?"
                                                    </button>
                                                    <button class="block w-full text-left p-2 bg-white rounded border hover:bg-yellow-50 text-xs">
                                                        "How does the digital submittal process save time?"
                                                    </button>
                                                    <button class="block w-full text-left p-2 bg-white rounded border hover:bg-yellow-50 text-xs">
                                                        "Can you create a practice quiz for this lesson?"
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Development Notice -->
                                    <div class="text-center py-8">
                                        <div class="inline-flex items-center px-4 py-2 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm">
                                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                            AI Assistant is currently in beta development
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Chat Input -->
                            <div class="p-4 border-t border-gray-200 bg-gray-50">
                                <div class="flex space-x-3">
                                    <div class="flex-1 relative">
                                        <input 
                                            type="text" 
                                            id="aiChatInput"
                                            placeholder="Ask me anything about CloseoutSoft..."
                                            class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
                                            onkeypress="handleAIChatKeyPress(event)"
                                        >
                                        <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1">
                                            <button class="p-1 text-gray-400 hover:text-gray-600" title="Voice Input">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <button 
                                        onclick="sendAIMessage()"
                                        class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all duration-300 flex items-center"
                                    >
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                                        </svg>
                                        Send
                                    </button>
                                </div>
                                <div class="mt-2 text-xs text-gray-500 text-center">
                                    Press Enter to send • Shift + Enter for new line • AI responses are generated in real-time
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Resources Tab -->
                    <div id="resourcesTabContent" class="h-full overflow-y-auto p-6 hidden">
                        <div class="max-w-4xl mx-auto">
                            <div class="mb-6">
                                <h3 class="text-2xl font-bold text-gray-900 mb-2">Additional Resources</h3>
                                <p class="text-gray-600">Supplementary materials to enhance your CloseoutSoft learning experience</p>
                            </div>

                            <div class="space-y-6">
                                <!-- Documentation -->
                                <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                                    <div class="bg-gradient-to-r from-blue-500 to-cyan-600 p-4 rounded-t-xl">
                                        <h4 class="font-semibold text-white flex items-center">
                                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                            Official Documentation
                                        </h4>
                                    </div>
                                    <div class="p-4">
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <a href="#" class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <div class="font-medium text-gray-900">User Manual</div>
                                                    <div class="text-sm text-gray-500">Complete platform guide</div>
                                                </div>
                                            </a>
                                            <a href="#" class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <div class="font-medium text-gray-900">Best Practices Guide</div>
                                                    <div class="text-sm text-gray-500">Implementation recommendations</div>
                                                </div>
                                            </a>
                                            <a href="#" class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                                    <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <div class="font-medium text-gray-900">FAQ Database</div>
                                                    <div class="text-sm text-gray-500">Common questions answered</div>
                                                </div>
                                            </a>
                                            <a href="#" class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                                                    <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <div class="font-medium text-gray-900">API Reference</div>
                                                    <div class="text-sm text-gray-500">Technical integration guide</div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <!-- Video Resources -->
                                <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                                    <div class="bg-gradient-to-r from-red-500 to-pink-600 p-4 rounded-t-xl">
                                        <h4 class="font-semibold text-white flex items-center">
                                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                            </svg>
                                            Video Tutorials
                                        </h4>
                                    </div>
                                    <div class="p-4">
                                        <div class="space-y-4">
                                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg">
                                                <div class="w-16 h-12 bg-gray-200 rounded flex items-center justify-center">
                                                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293L12 11l.707-.707A1 1 0 0113.414 10H15m-6 0a4 4 0 014-4h.586a1 1 0 01.707.293L15 7l.707-.707A1 1 0 0116.414 6H17a4 4 0 014 4v.586a1 1 0 01-.293.707L20 12l.707.707a1 1 0 01.293.707V14a4 4 0 01-4 4h-.586a1 1 0 01-.707-.293L15 17l-.707.707a1 1 0 01-.707.293H13a4 4 0 01-4-4M9 10V9a4 4 0 014-4h.586"/>
                                                    </svg>
                                                </div>
                                                <div class="flex-1">
                                                    <div class="font-medium text-gray-900">CloseoutSoft Overview (15 min)</div>
                                                    <div class="text-sm text-gray-500">Platform introduction and key concepts</div>
                                                    <div class="flex items-center mt-1 space-x-2">
                                                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Beginner</span>
                                                        <span class="text-xs text-gray-400">•</span>
                                                        <span class="text-xs text-gray-500">1.2k views</span>
                                                    </div>
                                                </div>
                                                <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                                                    Watch
                                                </button>
                                            </div>

                                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg">
                                                <div class="w-16 h-12 bg-gray-200 rounded flex items-center justify-center">
                                                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
                                                    </svg>
                                                </div>
                                                <div class="flex-1">
                                                    <div class="font-medium text-gray-900">Digital Submittal Workflow (22 min)</div>
                                                    <div class="text-sm text-gray-500">Step-by-step process demonstration</div>
                                                    <div class="flex items-center mt-1 space-x-2">
                                                        <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Intermediate</span>
                                                        <span class="text-xs text-gray-400">•</span>
                                                        <span class="text-xs text-gray-500">856 views</span>
                                                    </div>
                                                </div>
                                                <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                                                    Watch
                                                </button>
                                            </div>

                                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg">
                                                <div class="w-16 h-12 bg-gray-200 rounded flex items-center justify-center">
                                                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                                    </svg>
                                                </div>
                                                <div class="flex-1">
                                                    <div class="font-medium text-gray-900">QA/QC Best Practices (18 min)</div>
                                                    <div class="text-sm text-gray-500">Quality control implementation guide</div>
                                                    <div class="flex items-center mt-1 space-x-2">
                                                        <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">Advanced</span>
                                                        <span class="text-xs text-gray-400">•</span>
                                                        <span class="text-xs text-gray-500">623 views</span>
                                                    </div>
                                                </div>
                                                <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                                                    Watch
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Case Studies -->
                                <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                                    <div class="bg-gradient-to-r from-green-500 to-teal-600 p-4 rounded-t-xl">
                                        <h4 class="font-semibold text-white flex items-center">
                                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                            </svg>
                                            Real-World Case Studies
                                        </h4>
                                    </div>
                                    <div class="p-4">
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div class="border border-gray-200 rounded-lg p-4">
                                                <div class="flex items-start space-x-3 mb-3">
                                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                                        <span class="text-blue-600 font-bold text-sm">1</span>
                                                    </div>
                                                    <div>
                                                        <h5 class="font-semibold text-gray-900">Metropolitan Hospital Project</h5>
                                                        <div class="text-sm text-gray-500">Healthcare facility construction</div>
                                                    </div>
                                                </div>
                                                <p class="text-sm text-gray-600 mb-3">How CloseoutSoft streamlined the documentation process for a complex medical facility, reducing project delivery time by 30%.</p>
                                                <div class="flex items-center space-x-2 text-xs text-gray-500">
                                                    <span>New York</span>
                                                    <span>•</span>
                                                    <span>$45M project</span>
                                                    <span>•</span>
                                                    <span>15 min read</span>
                                                </div>
                                            </div>

                                            <div class="border border-gray-200 rounded-lg p-4">
                                                <div class="flex items-start space-x-3 mb-3">
                                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                                        <span class="text-green-600 font-bold text-sm">2</span>
                                                    </div>
                                                    <div>
                                                        <h5 class="font-semibold text-gray-900">Tech Campus Development</h5>
                                                        <div class="text-sm text-gray-500">Corporate office complex</div>
                                                    </div>
                                                </div>
                                                <p class="text-sm text-gray-600 mb-3">Multi-phase development project showcasing how digital submittals improved collaboration between 12 different contractors.</p>
                                                <div class="flex items-center space-x-2 text-xs text-gray-500">
                                                    <span>California</span>
                                                    <span>•</span>
                                                    <span>$120M project</span>
                                                    <span>•</span>
                                                    <span>20 min read</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- External Links -->
                                <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                                    <div class="bg-gradient-to-r from-purple-500 to-indigo-600 p-4 rounded-t-xl">
                                        <h4 class="font-semibold text-white flex items-center">
                                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                                            </svg>
                                            External Resources & Community
                                        </h4>
                                    </div>
                                    <div class="p-4">
                                        <div class="grid md:grid-cols-3 gap-4">
                                            <a href="#" class="text-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                                    <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                                                    </svg>
                                                </div>
                                                <div class="font-medium text-gray-900">Community Forum</div>
                                                <div class="text-sm text-gray-500">Join discussions with other users</div>
                                            </a>

                                            <a href="#" class="text-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                                                    </svg>
                                                </div>
                                                <div class="font-medium text-gray-900">Live Support</div>
                                                <div class="text-sm text-gray-500">Get real-time help from experts</div>
                                            </a>

                                            <a href="#" class="text-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2.5 2.5 0 00-2.5-2.5H15"/>
                                                    </svg>
                                                </div>
                                                <div class="font-medium text-gray-900">Knowledge Base</div>
                                                <div class="text-sm text-gray-500">Searchable help articles</div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Smart Activity Tracking System
    class ActivityTracker {
        constructor() {
            this.currentWeek = this.getCurrentWeekKey();
            this.activityData = this.loadActivityData();
            this.streakData = this.loadStreakData();
            this.lastUpdate = localStorage.getItem('lastActivityUpdate') || '';
            
            // Initialize if this is a new week
            if (this.isNewWeek()) {
                this.generateNewWeekData();
            }
            
            this.updateTodaysActivity();
        }

        getCurrentWeekKey() {
            const now = new Date();
            const startOfWeek = new Date(now);
            startOfWeek.setDate(now.getDate() - now.getDay()); // Get Sunday
            return startOfWeek.toISOString().split('T')[0];
        }

        isNewWeek() {
            const storedWeek = localStorage.getItem('currentWeek');
            return storedWeek !== this.currentWeek;
        }

        loadActivityData() {
            const stored = localStorage.getItem('weeklyActivityData');
            if (stored) {
                return JSON.parse(stored);
            }
            return this.generateRealisticWeekData();
        }

        loadStreakData() {
            const stored = localStorage.getItem('dailyStreakData');
            if (stored) {
                return JSON.parse(stored);
            }
            return this.generateInitialStreakData();
        }

        generateRealisticWeekData() {
            // Generate realistic patterns based on healthy learning behavior
            const basePatterns = {
                studyTime: this.generateStudyPattern(),
                quizAttempts: this.generateQuizPattern()
            };
            
            return basePatterns;
        }

        generateStudyPattern() {
            // Simulate realistic, healthy study patterns (balanced approach)
            const patterns = [
                [1.5, 2.0, 1.8, 1.2, 2.2, 1.0, 0.5], // Balanced learner
                [1.0, 1.5, 0, 2.0, 1.5, 1.5, 0],     // Takes rest days
                [1.2, 1.5, 1.8, 1.0, 2.0, 0.8, 1.0], // Steady and consistent
                [0.5, 1.0, 2.0, 1.5, 1.2, 1.8, 0]    // Weekend focused
            ];
            
            return patterns[Math.floor(Math.random() * patterns.length)];
        }

        generateQuizPattern() {
            // Quiz attempts follow study time but encourage balance
            return this.activityData?.studyTime?.map(studyHours => {
                if (studyHours === 0) return 0;
                if (studyHours > 1.5) return Math.floor(Math.random() * 2) + 1;
                if (studyHours > 0.5) return Math.floor(Math.random() * 2);
                return Math.random() < 0.3 ? 1 : 0;
            }) || [0, 1, 0, 1, 1, 1, 0];
        }

        generateInitialStreakData() {
            const streakLength = Math.floor(Math.random() * 7) + 1; // 1-7 days max
            const data = [];
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                
                data.push({
                    date: date.toISOString().split('T')[0],
                    active: i < streakLength,
                    studyTime: i < streakLength ? Math.random() * 2 + 0.5 : 0,
                    isToday: i === 0
                });
            }
            
            return data;
        }

        generateNewWeekData() {
            console.log('Generating new week data for healthy learning patterns...');
            
            // Simulate natural evolution - small changes for realistic progression
            const lastWeekData = this.activityData;
            
            this.activityData = {
                studyTime: this.evolvePattern(lastWeekData?.studyTime || [1, 1, 2, 0, 1, 1, 0]),
                quizAttempts: this.evolvePattern(lastWeekData?.quizAttempts || [0, 1, 0, 1, 1, 0, 0])
            };

            this.saveData();
            localStorage.setItem('currentWeek', this.currentWeek);
        }

        evolvePattern(lastPattern) {
            // Gentle evolution promoting healthy learning habits
            const trend = (Math.random() - 0.5) * 0.2; // Small trend factor
            
            return lastPattern.map((value, index) => {
                const variation = (Math.random() - 0.5) * 0.5; // Small variation
                let evolved = Math.max(0, value + trend + variation);
                
                // Cap daily study time at reasonable levels (max 3 hours)
                if (evolved > 3) evolved = 2.5 + Math.random() * 0.5;
                
                // Encourage rest days (Sunday typically lower)
                if (index === 0 && evolved > 1) evolved *= 0.6;
                
                // Round appropriately
                if (value % 1 === 0) return Math.round(evolved);
                return Math.round(evolved * 10) / 10;
            });
        }

        updateTodaysActivity() {
            const today = new Date().toISOString().split('T')[0];
            const dayIndex = new Date().getDay(); // 0 = Sunday
            
            // Realistic activity accumulation throughout the day
            const now = new Date();
            const hourProgress = Math.min(now.getHours() / 18, 1); // Cap at 6 PM for healthy boundaries
            
            // Scale today's activity based on time progression
            const baseStudyTime = this.activityData.studyTime[dayIndex];
            const baseQuizAttempts = this.activityData.quizAttempts[dayIndex];
            
            // Apply gradual progression throughout the day
            this.activityData.studyTime[dayIndex] = baseStudyTime * (0.2 + hourProgress * 0.8);
            this.activityData.quizAttempts[dayIndex] = Math.floor(baseQuizAttempts * hourProgress);
            
            this.lastUpdate = today;
            this.saveData();
        }

        saveData() {
            localStorage.setItem('weeklyActivityData', JSON.stringify(this.activityData));
            localStorage.setItem('dailyStreakData', JSON.stringify(this.streakData));
            localStorage.setItem('lastActivityUpdate', this.lastUpdate);
        }

        getWeeklyData() {
            return this.activityData;
        }

        getStreakData() {
            return this.streakData;
        }

        // Simulate healthy daily progression
        simulateHealthyProgress() {
            const today = new Date().getDay();
            const currentHour = new Date().getHours();
            
            // Healthy activity patterns with rest periods
            if (currentHour >= 9 && currentHour <= 12) {
                // Morning learning - light activity
                this.addBalancedActivity(0.05);
            } else if (currentHour >= 14 && currentHour <= 17) {
                // Afternoon - moderate activity
                this.addBalancedActivity(0.08);
            } else if (currentHour >= 19 && currentHour <= 21) {
                // Evening - peak but bounded learning time
                this.addBalancedActivity(0.1);
            }
            // Other times = rest periods (important for healthy habits)
        }

        addBalancedActivity(intensity) {
            const today = new Date().getDay();
            
            // Promote balanced learning with natural limits
            if (Math.random() < intensity && this.activityData.studyTime[today] < 3) {
                this.activityData.studyTime[today] += Math.random() * 0.15;
                
                // Moderate quiz frequency
                if (Math.random() < 0.2 && this.activityData.quizAttempts[today] < 3) {
                    this.activityData.quizAttempts[today] += 1;
                }
                
                this.saveData();
            }
        }
    }

    // Global variables and state management
    let unlockedLessons = JSON.parse(localStorage.getItem('unlockedLessons') || '[1]');
    let completedLessons = JSON.parse(localStorage.getItem('completedLessons') || '[]');
    let streak = parseInt(localStorage.getItem('streak') || '0');
    let lastActivity = localStorage.getItem('lastActivity') || '';
    let goals = JSON.parse(localStorage.getItem('goals') || '[]');

    // Enhanced tracking
    let activityTracker;
    let activityChartInstance;

    // Performance optimization - cache DOM elements
    const elements = {};

    // Lesson data
    const lessons = [
        { id: 1, title: 'Introduction', description: 'Core concepts of CloseoutSoft', link: 'lessons/lesson-1.html', quizLink: 'quiz.html' },
        { id: 2, title: 'Product Overview', description: 'Key features and workflows', link: 'lessons/lesson-2.html', quizLink: 'quiz.html' },
        { id: 3, title: 'Sales Enablement', description: 'Sales strategies and tools', link: 'lessons/lesson-3.html', quizLink: 'quiz.html' },
        { id: 4, title: 'Assessment & Field Readiness', description: 'Prepare for pre-sales', link: 'lessons/lesson-4.html', quizLink: 'quiz.html' },
        { id: 5, title: 'Customer Journey', description: 'Mapping customer engagement', link: 'lessons/lesson-5.html', quizLink: 'quiz.html' },
        { id: 6, title: 'Digital Marketing', description: 'Advanced marketing strategies', link: 'lessons/lesson-6.html', quizLink: 'quiz.html' },
        { id: 7, title: 'Proposal & Handoff', description: 'Crafting proposals and transitions', link: 'lessons/lesson-7.html' },
        { id: 8, title: 'Project Pipelines', description: 'Managing project pipelines', link: 'lessons/lesson-8.html' }
    ];

    // Motivational quotes with authors
    const quotes = [
        { text: "Stay curious, keep learning!", author: "Albert Einstein" },
        { text: "Every lesson is a step toward mastery.", author: "Confucius" },
        { text: "Success is built on consistent effort.", author: "Aristotle" },
        { text: "Unlock your potential with every quiz.", author: "Oprah Winfrey" },
        { text: "Keep moving forward, one lesson at a time.", author: "Walt Disney" },
        { text: "Learning never exhausts the mind.", author: "Leonardo da Vinci" },
        { text: "The expert in anything was once a beginner.", author: "Helen Hayes" }
    ];

    // Initialize application
    document.addEventListener('DOMContentLoaded', function() {
        initializeEnhancedApp();
    });

    function initializeEnhancedApp() {
        // Cache frequently used elements
        cacheElements();
        
        // Initialize activity tracker first
        activityTracker = new ActivityTracker();
        
        // Initialize with reduced animations for performance
        initializeAnimationsOptimized();
        updateLessonStates();
        loadProgress();
        initializeEnhancedCharts(); // Use enhanced version
        updateStreak();
        updateCurrentLesson();
        showSection('dashboard');
        updateStats();
        
        // Set up event listeners
        setupEventListeners();
        
        // Start healthy monitoring
        startHealthyActivityMonitoring();
        
        // Performance optimization: preload critical resources
        requestIdleCallback(() => {
            preloadResources();
        });
        
        console.log('Enhanced learning dashboard initialized with healthy activity tracking');
    }

    function cacheElements() {
        // Cache frequently accessed elements
        elements.sidebar = document.getElementById('sidebar');
        elements.mainContent = document.getElementById('main-content');
        elements.progressText = document.getElementById('progress-text');
        elements.progressPercentage = document.getElementById('progress-percentage');
        elements.streak = document.getElementById('streak');
        elements.streakMessage = document.getElementById('streakMessage');
        elements.streakCalendar = document.getElementById('streakCalendar');
    }

    function preloadResources() {
        // Preload images efficiently
        const imageUrls = [
            'image/technology-solution-removebg-preview.png',
            'image/Rebus Holdings Logo.png'
        ];
        
        const preloadFragment = document.createDocumentFragment();
        imageUrls.forEach(url => {
            const link = document.createElement('link');
            link.rel = 'preload';
            link.as = 'image';
            link.href = url;
            preloadFragment.appendChild(link);
        });
        document.head.appendChild(preloadFragment);
    }

    function updateStats() {
        // Batch DOM updates for performance
        requestAnimationFrame(() => {
            elements.statsLessons = elements.statsLessons || document.getElementById('stats-lessons');
            elements.statsStreak = elements.statsStreak || document.getElementById('stats-streak');
            
            if (elements.statsLessons) elements.statsLessons.textContent = `${completedLessons.length}/${lessons.length}`;
            if (elements.statsStreak) elements.statsStreak.textContent = `${streak} days`;
        });
    }

    // Enhanced chart initialization with smart activity data
    function initializeEnhancedCharts() {
        requestAnimationFrame(() => {
            const activityCanvas = document.getElementById('activityChart');
            
            if (!activityCanvas) {
                console.error('Activity chart canvas not found');
                return;
            }
            
            // Fix canvas dimensions to prevent scroll resizing
            const container = activityCanvas.parentElement;
            const containerRect = container.getBoundingClientRect();
            
            // Set explicit canvas dimensions
            activityCanvas.width = containerRect.width - 32;
            activityCanvas.height = 200;
            activityCanvas.style.width = (containerRect.width - 32) + 'px';
            activityCanvas.style.height = '200px';
            
            const activityCtx = activityCanvas.getContext('2d');

            // Destroy existing chart if it exists
            if (activityChartInstance) {
                activityChartInstance.destroy();
                activityChartInstance = null;
            }

            // Get smart activity data
            const weekData = activityTracker.getWeeklyData();

            try {
                activityChartInstance = new Chart(activityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                        datasets: [
                            {
                                label: 'Study Time (Hours)',
                                data: weekData.studyTime,
                                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                                borderColor: '#3B82F6',
                                fill: true,
                                tension: 0.4,
                                pointBackgroundColor: '#3B82F6',
                                pointBorderColor: '#fff',
                                pointBorderWidth: 3,
                                pointRadius: 6
                            },
                            {
                                label: 'Quiz Attempts',
                                data: weekData.quizAttempts,
                                backgroundColor: 'rgba(16, 185, 129, 0.2)',
                                borderColor: '#10B981',
                                fill: true,
                                tension: 0.4,
                                pointBackgroundColor: '#10B981',
                                pointBorderColor: '#fff',
                                pointBorderWidth: 3,
                                pointRadius: 6
                            }
                        ]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                                bottom: 10,
                                left: 10,
                                right: 10
                            }
                        },
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 3, // Healthy maximum
                                title: { 
                                    display: true, 
                                    text: 'Activity Level', 
                                    font: { weight: 'bold' } 
                                },
                                grid: { color: 'rgba(0,0,0,0.05)' }
                            },
                            x: {
                                title: { 
                                    display: true, 
                                    text: 'Day of Week', 
                                    font: { weight: 'bold' } 
                                },
                                grid: { color: 'rgba(0,0,0,0.05)' }
                            }
                        },
                        plugins: {
                            legend: { 
                                position: 'top', 
                                labels: { font: { weight: 'bold' } } 
                            },
                            tooltip: {
                                backgroundColor: 'rgba(15, 23, 42, 0.9)',
                                titleColor: '#fff',
                                bodyColor: '#fff',
                                borderColor: '#3B82F6',
                                borderWidth: 1,
                                callbacks: {
                                    afterBody: function(tooltipItems) {
                                        const dayIndex = tooltipItems[0].dataIndex;
                                        const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                                        return `Day: ${dayNames[dayIndex]}`;
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 1000,
                            easing: 'easeOutQuart'
                        }
                    }
                });
                
                console.log('Enhanced activity chart initialized with smart data');
                
            } catch (error) {
                console.error('Error creating enhanced activity chart:', error);
            }
        });
    }

    // Healthy activity monitoring
    function startHealthyActivityMonitoring() {
        // Update every 2 hours during reasonable hours
        setInterval(() => {
            if (activityTracker) {
                activityTracker.simulateHealthyProgress();
                
                // Update chart with new data
                if (activityChartInstance) {
                    const newData = activityTracker.getWeeklyData();
                    activityChartInstance.data.datasets[0].data = newData.studyTime;
                    activityChartInstance.data.datasets[1].data = newData.quizAttempts;
                    activityChartInstance.update('none');
                }
            }
        }, 7200000); // Every 2 hours

        // Check for new week once daily
        setInterval(() => {
            if (activityTracker && activityTracker.isNewWeek()) {
                activityTracker.generateNewWeekData();
                
                // Refresh chart with new week data
                if (activityChartInstance) {
                    const newData = activityTracker.getWeeklyData();
                    activityChartInstance.data.datasets[0].data = newData.studyTime;
                    activityChartInstance.data.datasets[1].data = newData.quizAttempts;
                    activityChartInstance.update();
                    
                    console.log('Week rotated - new learning patterns generated');
                }
            }
        }, 86400000); // Every 24 hours

        console.log('Healthy activity monitoring started');
    }

    // Handle window resize properly without affecting scroll
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            if (activityChartInstance) {
                const canvas = document.getElementById('activityChart');
                const container = canvas.parentElement;
                const containerRect = container.getBoundingClientRect();
                
                // Update canvas size
                canvas.width = containerRect.width - 32;
                canvas.style.width = (containerRect.width - 32) + 'px';
                
                // Redraw chart with new dimensions
                activityChartInstance.resize();
            }
        }, 250);
    });

    // Optimized animation functions
    function initializeAnimationsOptimized() {
        // Use more efficient animations with reduced complexity
        const cards = document.querySelectorAll('.card');
        const sidebarEl = elements.sidebar;
        const sectionTitle = document.querySelector('.section-title');
        
        // Batch animations to prevent layout thrashing
        requestAnimationFrame(() => {
            gsap.set([sidebarEl, cards, sectionTitle], { opacity: 0, y: 20 });
            
            const tl = gsap.timeline({ defaults: { ease: "power2.out" } });
            tl.to(sidebarEl, { opacity: 1, y: 0, duration: 0.4 })
            .to(sectionTitle, { opacity: 1, y: 0, duration: 0.3 }, "-=0.2")
            .to(cards, { opacity: 1, y: 0, duration: 0.3, stagger: 0.05 }, "-=0.1");
        });
    }

    // Optimized section management
    function showSection(sectionId) {
        const sections = document.querySelectorAll('.section');
        const targetSection = document.getElementById(sectionId);
        
        // Batch DOM operations
        requestAnimationFrame(() => {
            sections.forEach(section => section.classList.add('hidden'));
            targetSection.classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.querySelector(`[onclick*="${sectionId}"]`);
            if (activeNav) activeNav.classList.add('active');
            
            // Simplified entrance animation
            gsap.fromTo(targetSection, 
                { opacity: 0 }, 
                { opacity: 1, duration: 0.3, ease: "power2.out" }
            );
        });
    }

    // Progress and lesson management
    function updateLessonStates() {
        // Use requestAnimationFrame to batch updates
        requestAnimationFrame(() => {
            updateRoadmap();
            updateQuizzes();
        });
    }

    function updateRoadmap() {
        const roadmap = document.getElementById('roadmap');
        const fragment = document.createDocumentFragment(); // Use fragment for better performance
        
        lessons.forEach((lesson, index) => {
            const isUnlocked = unlockedLessons.includes(lesson.id);
            const isCompleted = completedLessons.includes(lesson.id);
            const statusColor = isCompleted ? 'from-success to-green-600' : isUnlocked ? 'from-accent to-accent-dark' : 'from-gray-400 to-gray-500';
            const icon = isCompleted ? 
                '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>' : 
                isUnlocked ? lesson.id : 
                '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>';
            
            const actionAttr = isUnlocked ? `href="${lesson.link}"` : `onclick="showLockedMessage(${lesson.id})"`;
            
            const cardEl = document.createElement('div');
            cardEl.className = 'card p-6 hover-lift relative overflow-hidden gpu-accelerated';
            cardEl.innerHTML = `
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br ${statusColor} rounded-xl flex items-center justify-center text-white font-bold shadow-medium">${icon}</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-primary mb-1">${lesson.title}</h3>
                        <p class="text-gray-600 text-sm">${lesson.description}</p>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-xs font-semibold px-3 py-1 rounded-full ${isCompleted ? 'bg-success text-white' : isUnlocked ? 'bg-accent text-white' : 'bg-gray-200 text-gray-600'}">
                        ${isCompleted ? 'Completed' : isUnlocked ? 'Available' : 'Locked'}
                    </span>
                    <a ${actionAttr} class="btn-primary px-4 py-2 rounded-xl font-semibold text-white text-sm">
                        ${isCompleted ? 'Review' : isUnlocked ? 'Start' : 'Locked'}
                    </a>
                </div>
            `;
            
            fragment.appendChild(cardEl);
            
            // Simplified animation
            gsap.from(cardEl, { 
                opacity: 0, 
                y: 20, 
                duration: 0.3, 
                delay: index * 0.05,
                ease: "power2.out" 
            });
        });
        
        roadmap.appendChild(fragment);
    }

    function updateQuizzes() {
        const quizzes = document.getElementById('quizzes');
        const fragment = document.createDocumentFragment();
        
        lessons.slice(0, 6).forEach((lesson, index) => {
            const isUnlocked = unlockedLessons.includes(lesson.id);
            const statusColor = isUnlocked ? 'from-success to-green-600' : 'from-gray-400 to-gray-500';
            const actionAttr = isUnlocked ? `href="${lesson.quizLink}"` : `onclick="showLockedMessage(${lesson.id})"`;
            
            const cardEl = document.createElement('div');
            cardEl.className = 'card p-6 hover-lift relative overflow-hidden gpu-accelerated';
            cardEl.innerHTML = `
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br ${statusColor} rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-medium">Q${lesson.id}</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-primary mb-1">Lesson ${lesson.id} Quiz</h3>
                        <p class="text-gray-600 text-sm">Test your knowledge on ${lesson.title.toLowerCase()}</p>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-xs font-semibold px-3 py-1 rounded-full ${isUnlocked ? 'bg-success text-white' : 'bg-gray-200 text-gray-600'}">
                        ${isUnlocked ? 'Available' : 'Locked'}
                    </span>
                    <a ${actionAttr} class="btn-primary px-4 py-2 rounded-xl font-semibold text-white text-sm">
                        ${isUnlocked ? 'Take Quiz' : 'Locked'}
                    </a>
                </div>
            `;
            
            fragment.appendChild(cardEl);
            
            gsap.from(cardEl, { 
                opacity: 0, 
                y: 20, 
                duration: 0.3, 
                delay: index * 0.05,
                ease: "power2.out" 
            });
        });
        
        quizzes.appendChild(fragment);
    }

    function updateCurrentLesson() {
        const currentLessonId = Math.max(...unlockedLessons);
        const lesson = lessons.find(l => l.id === currentLessonId) || lessons[0];
        
        // Batch DOM updates
        requestAnimationFrame(() => {
            document.getElementById('currentLessonTitle').textContent = `Lesson ${lesson.id}: ${lesson.title}`;
            document.querySelector('#my-learning .card p').textContent = lesson.description;
            document.getElementById('currentLessonLink').href = lesson.link;
        });
    }

    function loadProgress() {
        const totalLessons = lessons.length;
        const completed = completedLessons.length;
        const progressPercentage = (completed / totalLessons) * 100;
        
        // Batch DOM updates
        requestAnimationFrame(() => {
            elements.progressText.textContent = `${completed}/${totalLessons} Lessons Completed`;
            elements.progressPercentage.textContent = `${Math.round(progressPercentage)}%`;
        });

        // Optimized chart creation
        requestIdleCallback(() => {
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            new Chart(progressCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [progressPercentage, 100 - progressPercentage],
                        backgroundColor: ['#3B82F6', '#E5E7EB'],
                        borderWidth: 0,
                        circumference: 360,
                        cutout: '75%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        });
    }

    function updateStreak() {
        const today = new Date().toISOString().split('T')[0];
        const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
        
        if (lastActivity === yesterday) {
            streak++;
        } else if (lastActivity !== today && lastActivity !== '') {
            streak = 1;
        } else if (lastActivity === '') {
            streak = 1;
        }
        
        lastActivity = today;
        localStorage.setItem('streak', streak.toString());
        localStorage.setItem('lastActivity', lastActivity);
        
        // Batch DOM updates
        requestAnimationFrame(() => {
            elements.streak.textContent = `${streak} days`;
            
            if (streak >= 7) {
                elements.streakMessage.textContent = "Amazing! You're building excellent learning habits!";
            } else if (streak >= 3) {
                elements.streakMessage.textContent = "Great progress! Consistency leads to mastery!";
            } else {
                elements.streakMessage.textContent = "Keep the momentum going! Every day counts!";
            }
        });
        
        updateStreakCalendar();
        updateStats();
    }

    function updateStreakCalendar() {
        const fragment = document.createDocumentFragment();
        
        const today = new Date();
        for (let i = 6; i >= 0; i--) {
            const date = new Date(today);
            date.setDate(today.getDate() - i);
            
            const isActive = i < streak;
            const isToday = i === 0;
            const circle = document.createElement('div');
            circle.className = `w-8 h-8 rounded-xl transition-all duration-300 ${
                isToday ? 'streak-day today' : 
                isActive ? 'streak-day active' : 
                'bg-gray-200'
            }`;
            circle.title = date.toDateString();
            
            fragment.appendChild(circle);
            
            if (isActive || isToday) {
                gsap.from(circle, { 
                    scale: 0, 
                    opacity: 0, 
                    delay: (6 - i) * 0.05, 
                    duration: 0.3, 
                    ease: "back.out(1.5)" 
                });
            }
        }
        
        elements.streakCalendar.innerHTML = '';
        elements.streakCalendar.appendChild(fragment);
    }

    // Optimized quote management
    function newQuote() {
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        const quoteElement = document.getElementById('quote');
        const authorElement = document.getElementById('quoteAuthor');
        
        gsap.to([quoteElement, authorElement], {
            opacity: 0,
            duration: 0.2,
            onComplete: () => {
                quoteElement.textContent = `"${quote.text}"`;
                authorElement.textContent = `— ${quote.author}`;
                
                gsap.to([quoteElement, authorElement], {
                    opacity: 1,
                    duration: 0.3,
                    stagger: 0.1,
                    ease: "power2.out"
                });
            }
        });
    }

    // Utility functions
    function showLockedMessage(lessonNumber) {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-primary/60 backdrop-blur-sm z-[100] flex items-center justify-center p-6';
        modal.innerHTML = `
            <div class="modal-content p-8 max-w-md w-full text-center transform scale-95 rounded-3xl">
                <div class="w-20 h-20 bg-gradient-to-br from-danger to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-strong">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                    </svg>
                </div>
                <h2 class="text-2xl font-bold section-title mb-4">Lesson Locked</h2>
                <p class="text-gray-600 mb-4 leading-relaxed">Please complete <strong>Lesson ${lessonNumber - 1}</strong> to unlock this content.</p>
                <p class="text-sm text-gray-500 mb-8">Progress through lessons sequentially to access new content and build your knowledge systematically.</p>
                <button onclick="this.closest('.fixed').remove()" class="btn-primary px-8 py-3 rounded-xl font-semibold text-white">
                    Got it!
                </button>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        gsap.from(modal, { opacity: 0, duration: 0.3 });
        gsap.from(modal.querySelector('.modal-content'), { 
            scale: 0.8, 
            duration: 0.3, 
            ease: "back.out(1.2)" 
        });
    }

    function unlockLesson(lessonNumber) {
        if (!unlockedLessons.includes(lessonNumber)) {
            unlockedLessons.push(lessonNumber);
            localStorage.setItem('unlockedLessons', JSON.stringify(unlockedLessons));
            updateLessonStates();
            updateCurrentLesson();
        }
    }

    function completeLesson(lessonNumber) {
        if (!completedLessons.includes(lessonNumber)) {
            completedLessons.push(lessonNumber);
            localStorage.setItem('completedLessons', JSON.stringify(completedLessons));
            
            if (lessonNumber < lessons.length) {
                unlockLesson(lessonNumber + 1);
            }
            
            loadProgress();
            updateLessonStates();
            updateCurrentLesson();
            updateStreak();
            updateStats();
        }
    }

    // Initialize quote with delay
    setTimeout(() => {
        newQuote();
    }, 1000);

    // Balanced quote rotation for motivation without distraction
    setInterval(() => {
        if (Math.random() < 0.15) { // Reduced frequency
            newQuote();
        }
    }, 60000); // Every minute, but low probability

    // Enhanced progress data management
    class ProgressOverviewManager {
        constructor(activityTracker) {
            this.activityTracker = activityTracker;
            this.achievements = this.loadAchievements();
            this.weeklyGoal = this.loadWeeklyGoal();
        }

        loadAchievements() {
            const stored = localStorage.getItem('userAchievements');
            if (stored) {
                return JSON.parse(stored);
            }
            return {
                // General achievements
                consistentLearner: false,
                weekWarrior: false,
                perfectWeek: false,
                
                // Lesson-specific achievements
                foundationBuilder: false,      // Lesson 1: Introduction
                productExpert: false,          // Lesson 2: Product Overview
                salesChampion: false,          // Lesson 3: Sales Enablement
                fieldReady: false,             // Lesson 4: Assessment & Field Readiness
                customerAdvocate: false,       // Lesson 5: Customer Journey
                digitalMarketer: false,        // Lesson 6: Digital Marketing
                proposalMaster: false,         // Lesson 7: Proposal & Handoff
                pipelineGuru: false            // Lesson 8: Project Pipelines
            };
        }

        loadWeeklyGoal() {
            const stored = localStorage.getItem('weeklyLearningGoal');
            if (stored) {
                return JSON.parse(stored);
            }
            return {
                targetLessons: 2,
                targetActiveDays: 5,
                currentLessons: 0,
                currentActiveDays: 0,
                weekStart: this.getWeekStart()
            };
        }

        getWeekStart() {
            const now = new Date();
            const startOfWeek = new Date(now);
            startOfWeek.setDate(now.getDate() - now.getDay());
            return startOfWeek.toISOString().split('T')[0];
        }

        calculateWeeklyStats() {
            const weekData = this.activityTracker.getWeeklyData();
            const totalStudyTime = weekData.studyTime.reduce((sum, time) => sum + time, 0);
            const totalQuizAttempts = weekData.quizAttempts.reduce((sum, attempts) => sum + attempts, 0);
            const activeDays = weekData.studyTime.filter(time => time > 0).length;

            return {
                totalStudyTime: Math.round(totalStudyTime * 10) / 10,
                totalQuizAttempts,
                activeDays,
                averageDaily: totalStudyTime > 0 ? Math.round((totalStudyTime / 7) * 10) / 10 : 0
            };
        }

        calculateAverageQuizScore() {
            // Simulate realistic quiz performance based on study patterns
            const weekData = this.activityTracker.getWeeklyData();
            const studyIntensity = weekData.studyTime.reduce((sum, time) => sum + time, 0) / 7;
            
            // Higher study time correlates with better quiz scores (realistic simulation)
            let baseScore = 65 + (studyIntensity * 15); // 65% base + up to 15% bonus
            baseScore = Math.min(baseScore, 95); // Cap at 95%
            baseScore = Math.max(baseScore, 60); // Floor at 60%
            
            return Math.round(baseScore);
        }

        updateAchievements() {
            const updated = { ...this.achievements };
            let newAchievements = [];

            // Check lesson-specific achievements
            const lessonAchievements = [
                { lessonId: 1, key: 'foundationBuilder', name: 'Foundation Builder' },
                { lessonId: 2, key: 'productExpert', name: 'Product Expert' },
                { lessonId: 3, key: 'salesChampion', name: 'Sales Champion' },
                { lessonId: 4, key: 'fieldReady', name: 'Field Ready' },
                { lessonId: 5, key: 'customerAdvocate', name: 'Customer Advocate' },
                { lessonId: 6, key: 'digitalMarketer', name: 'Digital Marketer' },
                { lessonId: 7, key: 'proposalMaster', name: 'Proposal Master' },
                { lessonId: 8, key: 'pipelineGuru', name: 'Pipeline Guru' }
            ];

            lessonAchievements.forEach(achievement => {
                if (!updated[achievement.key] && completedLessons.includes(achievement.lessonId)) {
                    updated[achievement.key] = true;
                    newAchievements.push(achievement.key);
                }
            });

            // Check for consistent learner (5+ day streak)
            if (!updated.consistentLearner && streak >= 5) {
                updated.consistentLearner = true;
                newAchievements.push('consistentLearner');
            }

            // Check for week warrior (active all 7 days)
            const weekStats = this.calculateWeeklyStats();
            if (!updated.weekWarrior && weekStats.activeDays >= 7) {
                updated.weekWarrior = true;
                newAchievements.push('weekWarrior');
            }

            // Check for perfect week (high study time + all days active)
            if (!updated.perfectWeek && weekStats.activeDays >= 7 && weekStats.totalStudyTime >= 14) {
                updated.perfectWeek = true;
                newAchievements.push('perfectWeek');
            }

            this.achievements = updated;
            localStorage.setItem('userAchievements', JSON.stringify(updated));

            return newAchievements;
        }

        updateWeeklyGoal() {
            const currentWeekStart = this.getWeekStart();
            
            // Reset if new week
            if (this.weeklyGoal.weekStart !== currentWeekStart) {
                this.weeklyGoal = {
                    targetLessons: 2,
                    targetActiveDays: 5,
                    currentLessons: completedLessons.length,
                    currentActiveDays: this.calculateWeeklyStats().activeDays,
                    weekStart: currentWeekStart
                };
            } else {
                // Update current progress
                this.weeklyGoal.currentLessons = completedLessons.length;
                this.weeklyGoal.currentActiveDays = this.calculateWeeklyStats().activeDays;
            }

            localStorage.setItem('weeklyLearningGoal', JSON.stringify(this.weeklyGoal));
        }

        getLearningPathProgress() {
            // Return actual lessons with their completion status
            return lessons.map(lesson => ({
                id: lesson.id,
                title: lesson.title,
                description: lesson.description,
                isCompleted: completedLessons.includes(lesson.id),
                isUnlocked: unlockedLessons.includes(lesson.id),
                progress: completedLessons.includes(lesson.id) ? 100 : 0
            }));
        }

        getCurrentFocusArea() {
            const nextIncompleteLesson = lessons.find(lesson => !completedLessons.includes(lesson.id));
            
            if (!nextIncompleteLesson) {
                return { area: 'Completed', detail: 'All Lessons' };
            }
            
            // Extract key focus area from lesson title
            const title = nextIncompleteLesson.title;
            if (title.includes('Introduction') || title.includes('Overview')) {
                return { area: 'Foundation', detail: 'Learning' };
            } else if (title.includes('Sales') || title.includes('Marketing')) {
                return { area: 'Sales', detail: 'Enablement' };
            } else if (title.includes('Assessment') || title.includes('Customer')) {
                return { area: 'Customer', detail: 'Focus' };
            } else if (title.includes('Proposal') || title.includes('Pipeline')) {
                return { area: 'Advanced', detail: 'Skills' };
            }
            
            // Fallback to first word of title
            const firstWord = title.split(' ')[0];
            return { area: firstWord, detail: 'Focus' };
        }
    }

    // Global progress manager instance
    let progressOverviewManager;

    // Enhanced function to update the entire Progress Overview section
    function updateProgressOverview() {
        if (!progressOverviewManager || !activityTracker) return;

        requestAnimationFrame(() => {
            // Update weekly statistics
            const weekStats = progressOverviewManager.calculateWeeklyStats();
            const avgQuizScore = progressOverviewManager.calculateAverageQuizScore();
            const focusArea = progressOverviewManager.getCurrentFocusArea();
            
            // Update study time card
            const studyTimeEl = document.querySelector('[data-metric="study-time"]');
            if (studyTimeEl) {
                studyTimeEl.querySelector('.text-xl').textContent = weekStats.totalStudyTime + 'h';
            }
            
            // Update quiz score card
            const quizScoreEl = document.querySelector('[data-metric="quiz-score"]');
            if (quizScoreEl) {
                quizScoreEl.querySelector('.text-xl').textContent = avgQuizScore + '%';
            }
            
            // Update streak card
            const streakEl = document.querySelector('[data-metric="streak"]');
            if (streakEl) {
                streakEl.querySelector('.text-xl').textContent = streak.toString();
            }
            
            // Update focus area card
            const focusAreaEl = document.querySelector('[data-metric="focus-area"]');
            if (focusAreaEl) {
                focusAreaEl.querySelector('.text-sm').textContent = focusArea.area;
                focusAreaEl.querySelector('.text-xs').textContent = focusArea.detail;
            }
            
            // Update achievements
            updateAchievementDisplay();
            
            // Update learning path progress
            updateLearningPathDisplay();
            
            // Update weekly goal
            updateWeeklyGoalDisplay();
        });
    }

    function updateAchievementDisplay() {
        const newAchievements = progressOverviewManager.updateAchievements();
        const achievementContainer = document.querySelector('[data-section="achievements"]');
        
        if (!achievementContainer) return;
        
        const achievements = progressOverviewManager.achievements;
        const achievementElements = [];
        
        // Lesson-specific achievements
        const lessonAchievements = [
            { key: 'foundationBuilder', name: 'Foundation Builder', color: 'blue', icon: 'foundation', description: 'Mastered core concepts' },
            { key: 'productExpert', name: 'Product Expert', color: 'indigo', icon: 'product', description: 'Product knowledge complete' },
            { key: 'salesChampion', name: 'Sales Champion', color: 'green', icon: 'sales', description: 'Sales strategies mastered' },
            { key: 'fieldReady', name: 'Field Ready', color: 'yellow', icon: 'field', description: 'Assessment skills ready' },
            { key: 'customerAdvocate', name: 'Customer Advocate', color: 'pink', icon: 'customer', description: 'Customer journey expert' },
            { key: 'digitalMarketer', name: 'Digital Marketer', color: 'purple', icon: 'digital', description: 'Marketing strategies learned' },
            { key: 'proposalMaster', name: 'Proposal Master', color: 'orange', icon: 'proposal', description: 'Proposal skills complete' },
            { key: 'pipelineGuru', name: 'Pipeline Guru', color: 'cyan', icon: 'pipeline', description: 'Pipeline management expert' }
        ];
        
        // General achievements
        const generalAchievements = [
            { key: 'consistentLearner', name: 'Consistent Learner', color: 'emerald', icon: 'trending-up', description: '5-day learning streak' },
            { key: 'weekWarrior', name: 'Week Warrior', color: 'red', icon: 'lightning', description: 'Active all 7 days' },
            { key: 'perfectWeek', name: 'Perfect Week', color: 'amber', icon: 'star', description: '14+ hours & 7 active days' }
        ];
        
        // Combine all achievements and filter earned ones
        const allAchievements = [...lessonAchievements, ...generalAchievements];
        allAchievements.forEach(achievement => {
            if (achievements[achievement.key]) {
                achievementElements.push(achievement);
            }
        });
        
        // Show placeholder if no achievements yet
        if (achievementElements.length === 0) {
            achievementContainer.innerHTML = `
                <div class="flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200">
                    <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                        <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium text-gray-600">Complete lessons to unlock achievements</span>
                </div>
            `;
            return;
        }
        
        // Render achievements
        const fragment = document.createDocumentFragment();
        achievementElements.forEach(achievement => {
            const div = document.createElement('div');
            div.className = `flex items-center gap-2 bg-${achievement.color}-50 px-3 py-2 rounded-lg border border-${achievement.color}-200 relative group`;
            div.innerHTML = `
                <div class="w-6 h-6 bg-${achievement.color}-400 rounded-full flex items-center justify-center shadow-sm">
                    <svg class="w-3 h-3 text-${achievement.color}-800" fill="currentColor" viewBox="0 0 20 20">
                        ${getAchievementIcon(achievement.icon)}
                    </svg>
                </div>
                <span class="text-sm font-medium text-${achievement.color}-800">${achievement.name}</span>
                <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap z-10">
                    ${achievement.description}
                </div>
            `;
            fragment.appendChild(div);
        });
        
        achievementContainer.innerHTML = '';
        achievementContainer.appendChild(fragment);
        
        // Animate new achievements
        newAchievements.forEach((achievementKey, index) => {
            const element = achievementContainer.children[achievementElements.findIndex(a => a.key === achievementKey)];
            if (element) {
                gsap.from(element, {
                    scale: 0,
                    opacity: 0,
                    duration: 0.6,
                    delay: index * 0.3,
                    ease: "back.out(2)"
                });
                
                // Add celebration effect for new achievements
                setTimeout(() => {
                    gsap.fromTo(element, 
                        { boxShadow: "0 0 0px rgba(59, 130, 246, 0)" },
                        { 
                            boxShadow: "0 0 20px rgba(59, 130, 246, 0.6)",
                            duration: 0.5,
                            yoyo: true,
                            repeat: 3
                        }
                    );
                }, (index * 300) + 600);
            }
        });
    }

    function updateLearningPathDisplay() {
        const lessonProgress = progressOverviewManager.getLearningPathProgress();
        const pathContainer = document.querySelector('[data-section="learning-path"]');
        
        if (!pathContainer) return;
        
        const fragment = document.createDocumentFragment();
        lessonProgress.forEach(lesson => {
            const div = document.createElement('div');
            div.className = 'flex items-center gap-3';
            
            let color, status;
            if (lesson.isCompleted) {
                color = 'green-500';
                status = 'Complete';
            } else if (lesson.isUnlocked) {
                color = 'blue-500';
                status = 'Available';
            } else {
                color = 'gray-300';
                status = 'Locked';
            }
            
            div.innerHTML = `
                <div class="w-3 h-3 bg-${color} rounded-full"></div>
                <span class="text-sm font-medium text-gray-700">Lesson ${lesson.id}: ${lesson.title}</span>
                <div class="flex-1 bg-gray-200 rounded-full h-1.5 ml-2">
                    <div class="bg-${color} h-1.5 rounded-full transition-all duration-1000" style="width: ${lesson.progress}%"></div>
                </div>
                <span class="text-xs text-gray-500">${status}</span>
            `;
            
            fragment.appendChild(div);
        });
        
        pathContainer.innerHTML = '';
        pathContainer.appendChild(fragment);
    }

    function updateWeeklyGoalDisplay() {
        progressOverviewManager.updateWeeklyGoal();
        const goal = progressOverviewManager.weeklyGoal;
        
        const goalContainer = document.querySelector('[data-section="weekly-goal"]');
        if (!goalContainer) return;
        
        const goalProgress = ((goal.currentLessons / goal.targetLessons) + (goal.currentActiveDays / goal.targetActiveDays)) / 2;
        const goalPercentage = Math.min(goalProgress * 100, 100);
        
        // Update active days display
        const activeDaysEl = goalContainer.querySelector('[data-goal="active-days"]');
        if (activeDaysEl) {
            activeDaysEl.textContent = `${goal.currentActiveDays}/${goal.targetActiveDays} days active`;
        }
        
        // Update progress bar
        const progressBar = goalContainer.querySelector('.bg-gradient-to-r');
        if (progressBar) {
            progressBar.style.width = goalPercentage + '%';
        }
        
        // Update percentage display
        const percentageEl = goalContainer.querySelector('[data-goal="percentage"]');
        if (percentageEl) {
            percentageEl.textContent = Math.round(goalPercentage) + '%';
        }
    }

    function getAchievementIcon(iconType) {
        const icons = {
            // General achievement icons
            star: '<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>',
            'trending-up': '<path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd"/>',
            lightning: '<path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>',
            
            // Lesson-specific achievement icons
            foundation: '<path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>',
            
            product: '<path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"/>',
            
            sales: '<path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L18 4L13 9V22H11L6 18V10.5L9 7.5L12 10.5V22H15V9H21Z" viewBox="0 0 24 24"><path d="M8.5 7a3.5 3.5 0 117 0v.5h3a1 1 0 011 1V16a2 2 0 01-2 2H16v1.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5V18H4a2 2 0 01-2-2V8.5a1 1 0 011-1h3V7z"/></path>',
            
            field: '<path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>',
            
            customer: '<path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/> <path d="M9 12a3 3 0 100-6 3 3 0 000 6z"/> <path d="M9 14s-4 2-4 4v2h8v-2c0-2-4-4-4-4z"/>',
            
            digital: '<path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/> <path d="M8 8a1 1 0 100-2 1 1 0 000 2z"/>',
            
            proposal: '<path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z" clip-rule="evenodd"/>',
            
            pipeline: '<path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>'
        };
        return icons[iconType] || icons.star;
    }



    // Integration with existing initialization
    function initializeProgressOverview() {
        if (!activityTracker) {
            console.warn('ActivityTracker not found. Progress overview will use default values.');
            return;
        }
        
        progressOverviewManager = new ProgressOverviewManager(activityTracker);
        updateProgressOverview();
    }

    // Enhanced cacheElements function to include progress overview elements
    function cacheProgressElements() {
        // Extend existing elements cache with progress overview elements
        elements.studyTimeMetric = document.querySelector('[data-metric="study-time"]');
        elements.quizScoreMetric = document.querySelector('[data-metric="quiz-score"]'); 
        elements.streakMetric = document.querySelector('[data-metric="streak"]');
        elements.focusAreaMetric = document.querySelector('[data-metric="focus-area"]');
        elements.achievementsSection = document.querySelector('[data-section="achievements"]');
        elements.learningPathSection = document.querySelector('[data-section="learning-path"]');
        elements.weeklyGoalSection = document.querySelector('[data-section="weekly-goal"]');
    }

    // Enhanced updateStats function to include progress overview updates
    function updateStatsWithProgress() {
        // Call original updateStats
        updateStats();
        
        // Update progress overview
        updateProgressOverview();
    }

    // Store original functions to avoid duplication issues
    let originalFunctionsStored = false;
    let originalCompleteLesson;
    let originalUpdateStreak;

    // Function to safely override existing functions without duplication
    function setupProgressOverviewIntegration() {
        if (originalFunctionsStored) return; // Prevent multiple overrides
        
        // Store original functions
        if (typeof completeLesson === 'function') {
            originalCompleteLesson = completeLesson;
        }
        if (typeof updateStreak === 'function') {
            originalUpdateStreak = updateStreak;
        }
        
        // Override completeLesson to include progress updates
        if (originalCompleteLesson) {
            window.completeLesson = function(lessonNumber) {
                originalCompleteLesson(lessonNumber);
                
                // Update progress overview when lessons are completed
                if (progressOverviewManager) {
                    updateProgressOverview();
                }
            };
        }
        
        // Override updateStreak to include progress updates
        if (originalUpdateStreak) {
            window.updateStreak = function() {
                originalUpdateStreak();
                
                // Update progress overview when streak changes
                if (progressOverviewManager) {
                    updateProgressOverview();
                }
            };
        }
        
        originalFunctionsStored = true;
    }

    // Initialize progress overview after the main app is ready
    function initializeProgressOverviewSafely() {
        // Wait for the main app to be initialized first
        if (typeof activityTracker === 'undefined' || !activityTracker) {
            // Retry after a short delay if ActivityTracker isn't ready
            setTimeout(initializeProgressOverviewSafely, 100);
            return;
        }
        
        // Cache progress elements
        cacheProgressElements();
        
        // Initialize progress overview manager
        if (!progressOverviewManager) {
            progressOverviewManager = new ProgressOverviewManager(activityTracker);
        }
        
        // Set up function overrides
        setupProgressOverviewIntegration();
        
        // Initial progress overview update
        updateProgressOverview();
        
        console.log('Progress overview integration initialized safely');
    }

    // Initialize progress overview after main app loads
    document.addEventListener('DOMContentLoaded', function() {
        // Use a timeout to ensure the main app initialization completes first
        setTimeout(initializeProgressOverviewSafely, 500);
    });

    // Quiz Performance Analytics Script

    let quizData = null;
    let quizChart = null;
    let summaryChart = null;

    // File handling functions
    function handleDragOver(event) {
        event.preventDefault();
        const dropZone = document.getElementById('dropZone');
        dropZone.classList.add('border-accent', 'bg-accent/5');
    }

    function handleDragLeave(event) {
        event.preventDefault();
        const dropZone = document.getElementById('dropZone');
        dropZone.classList.remove('border-accent', 'bg-accent/5');
    }

    function handleFileDrop(event) {
        event.preventDefault();
        const dropZone = document.getElementById('dropZone');
        dropZone.classList.remove('border-accent', 'bg-accent/5');
        
        const files = event.dataTransfer.files;
        if (files.length > 0) {
            const file = files[0];
            if (file.type === 'application/json') {
                loadFile(file);
            } else {
                showError('Please upload a valid JSON file');
            }
        }
    }

    function loadQuizResults(event) {
        const file = event.target.files[0];
        if (file && file.type === 'application/json') {
            loadFile(file);
        } else {
            showError('Please select a valid JSON file');
        }
    }

    function loadFile(file) {
        showLoading();
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const jsonData = JSON.parse(e.target.result);
                quizData = jsonData;
                processQuizData();
            } catch (error) {
                hideLoading();
                showError('Invalid JSON format. Please check your file.');
                console.error('JSON parsing error:', error);
            }
        };
        reader.readAsText(file);
    }

    function showLoading() {
        document.getElementById('dropContent').classList.add('hidden');
        document.getElementById('dropLoading').classList.remove('hidden');
    }

    function hideLoading() {
        document.getElementById('dropContent').classList.remove('hidden');
        document.getElementById('dropLoading').classList.add('hidden');
    }

    function showError(message) {
        alert(message); // Could be replaced with a more elegant notification system
    }

    // Data processing functions
    function processQuizData() {
        if (!quizData) {
            showError('No quiz data available');
            return;
        }

        try {
            // Calculate metrics
            const metrics = calculateMetrics();
            
            // Update UI
            updateParticipantInfo();
            updateSummaryCards(metrics);
            createCharts(metrics);
            createQuestionBreakdown();
            
            // Show results
            document.getElementById('resultsSection').classList.remove('hidden');
            hideLoading();
            
        } catch (error) {
            hideLoading();
            showError('Error processing quiz data: ' + error.message);
            console.error('Processing error:', error);
        }
    }

    function calculateMetrics() {
        const scores = quizData.scores || [];
        const details = quizData.details || [];
        
        // Calculate total questions and correct answers
        let totalQuestions = 0;
        let totalCorrect = 0;
        let totalTime = 0;
        let sectionMetrics = [];
        
        details.forEach((section, index) => {
            let sectionCorrect = 0;
            let sectionQuestions = section.length;
            let sectionTime = 0;
            
            section.forEach(question => {
                totalQuestions++;
                if (question.correct) {
                    totalCorrect++;
                    sectionCorrect++;
                }
                // Simulate time data if not available
                const timeSpent = Math.random() * 60 + 10; // 10-70 seconds
                sectionTime += timeSpent;
                totalTime += timeSpent;
            });
            
            sectionMetrics.push({
                section: index + 1,
                score: scores[index] || 0,
                correct: sectionCorrect,
                total: sectionQuestions,
                percentage: sectionQuestions > 0 ? (sectionCorrect / sectionQuestions) * 100 : 0,
                averageTime: sectionQuestions > 0 ? sectionTime / sectionQuestions : 0
            });
        });
        
        return {
            totalQuestions,
            totalCorrect,
            totalIncorrect: totalQuestions - totalCorrect,
            overallPercentage: totalQuestions > 0 ? (totalCorrect / totalQuestions) * 100 : 0,
            averageTime: totalQuestions > 0 ? totalTime / totalQuestions : 0,
            sectionMetrics
        };
    }

    function updateParticipantInfo() {
        const participantDetails = document.getElementById('participantDetails');
        const overallScore = document.getElementById('overallScore');
        
        participantDetails.innerHTML = `
            <div><strong>${quizData.name}</strong></div>
            <div class="text-sm">${quizData.email}</div>
        `;
        
        const totalPossible = quizData.details.reduce((sum, section) => sum + section.length, 0);
        const percentage = totalPossible > 0 ? ((quizData.total / totalPossible) * 100).toFixed(1) : 0;
        
        overallScore.textContent = `${percentage}%`;
    }

    function updateSummaryCards(metrics) {
        document.getElementById('correctAnswers').textContent = metrics.totalCorrect;
        document.getElementById('incorrectAnswers').textContent = metrics.totalIncorrect;
        document.getElementById('averageTime').textContent = `${Math.round(metrics.averageTime)}s`;
    }

    // Chart creation functions
    function createCharts(metrics) {
        createSectionChart(metrics.sectionMetrics);
        createSummaryChart(metrics);
    }

    function createSectionChart(sectionMetrics) {
        const canvas = document.getElementById('quizChart');
        const ctx = canvas.getContext('2d');
        
        // Set fixed canvas dimensions - COMPLETELY FIXED SIZE
        canvas.width = 400;
        canvas.height = 250;
        canvas.style.width = '400px';
        canvas.style.height = '250px';
        
        // Destroy existing chart if it exists
        if (quizChart) {
            quizChart.destroy();
        }
        
        const sectionNames = sectionMetrics.map(s => `Section ${s.section}`);
        const sectionScores = sectionMetrics.map(s => s.percentage);
        const sectionColors = sectionMetrics.map(s => {
            if (s.percentage >= 80) return '#10B981'; // Green
            if (s.percentage >= 60) return '#F59E0B'; // Yellow
            return '#EF4444'; // Red
        });
        
        quizChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: sectionNames,
                datasets: [{
                    label: 'Score (%)',
                    data: sectionScores,
                    backgroundColor: sectionColors,
                    borderColor: sectionColors.map(color => color + '80'),
                    borderWidth: 2,
                    borderRadius: 8,
                    borderSkipped: false,
                }]
            },
            options: {
                responsive: false, // DISABLE RESPONSIVE
                maintainAspectRatio: true, // MAINTAIN ASPECT RATIO
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#374151',
                        borderWidth: 1,
                        callbacks: {
                            label: function(context) {
                                const section = sectionMetrics[context.dataIndex];
                                return [
                                    `Score: ${context.parsed.y.toFixed(1)}%`,
                                    `Correct: ${section.correct}/${section.total}`,
                                    `Avg Time: ${Math.round(section.averageTime)}s`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: '#E5E7EB'
                        },
                        ticks: {
                            color: '#6B7280',
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#6B7280'
                        }
                    }
                }
            }
        });
    }

    function createSummaryChart(metrics) {
        const canvas = document.getElementById('quizSummaryChart');
        const ctx = canvas.getContext('2d');
        
        // Set fixed canvas dimensions - COMPLETELY FIXED SIZE
        canvas.width = 400;
        canvas.height = 250;
        canvas.style.width = '400px';
        canvas.style.height = '250px';
        
        // Destroy existing chart if it exists
        if (summaryChart) {
            summaryChart.destroy();
        }
        
        summaryChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Correct', 'Incorrect'],
                datasets: [{
                    data: [metrics.totalCorrect, metrics.totalIncorrect],
                    backgroundColor: ['#10B981', '#EF4444'],
                    borderColor: ['#059669', '#DC2626'],
                    borderWidth: 2,
                    hoverBackgroundColor: ['#059669', '#DC2626'],
                    hoverBorderWidth: 3
                }]
            },
            options: {
                responsive: false, // DISABLE RESPONSIVE
                maintainAspectRatio: true, // MAINTAIN ASPECT RATIO
                interaction: {
                    intersect: false
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            usePointStyle: true,
                            color: '#374151',
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#374151',
                        borderWidth: 1,
                        callbacks: {
                            label: function(context) {
                                const percentage = ((context.parsed / metrics.totalQuestions) * 100).toFixed(1);
                                return `${context.label}: ${context.parsed} (${percentage}%)`;
                            }
                        }
                    }
                },
                cutout: '60%'
            }
        });
    }

    // Question breakdown function
    function createQuestionBreakdown() {
        const container = document.getElementById('questionBreakdown');
        container.innerHTML = '';
        
        quizData.details.forEach((section, sectionIndex) => {
            // Section header
            const sectionHeader = document.createElement('div');
            sectionHeader.className = 'font-semibold text-primary mb-2 border-b pb-2';
            sectionHeader.textContent = `Section ${sectionIndex + 1}`;
            container.appendChild(sectionHeader);
            
            // Questions
            section.forEach((question, questionIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = `p-3 rounded-lg border-l-4 mb-2 ${
                    question.correct ? 'border-success bg-success/5' : 'border-danger bg-danger/5'
                }`;
                
                questionDiv.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <p class="font-medium text-sm text-gray-800">${question.question}</p>
                            <div class="mt-2 text-xs space-y-1">
                                <div class="flex items-center gap-2">
                                    <span class="text-gray-500">Your answer:</span>
                                    <span class="font-medium ${question.correct ? 'text-success' : 'text-danger'}">${question.userAnswer}</span>
                                </div>
                                ${!question.correct ? `
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Correct answer:</span>
                                        <span class="font-medium text-success">${question.correctAnswer}</span>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        <div class="ml-4">
                            <div class="w-6 h-6 rounded-full flex items-center justify-center ${
                                question.correct ? 'bg-success text-white' : 'bg-danger text-white'
                            }">
                                ${question.correct ? '✓' : '✗'}
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(questionDiv);
            });
        });
    }

    // Export and utility functions
    function exportResults() {
        if (!quizData) {
            showError('No quiz data to export');
            return;
        }
        
        const metrics = calculateMetrics();
        const reportData = {
            participant: {
                name: quizData.name,
                email: quizData.email,
                date: new Date().toLocaleDateString()
            },
            summary: {
                totalQuestions: metrics.totalQuestions,
                correctAnswers: metrics.totalCorrect,
                overallPercentage: metrics.overallPercentage.toFixed(1),
                averageTime: Math.round(metrics.averageTime)
            },
            sectionBreakdown: metrics.sectionMetrics,
            detailedResults: quizData.details
        };
        
        const blob = new Blob([JSON.stringify(reportData, null, 2)], { 
            type: 'application/json' 
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `quiz-report-${quizData.name.replace(/\s+/g, '-').toLowerCase()}-${Date.now()}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function clearResults() {
        // Reset data
        quizData = null;
        
        // Destroy charts
        if (quizChart) {
            quizChart.destroy();
            quizChart = null;
        }
        if (summaryChart) {
            summaryChart.destroy();
            summaryChart = null;
        }
        
        // Clear UI
        document.getElementById('resultsSection').classList.add('hidden');
        document.getElementById('importFile').value = '';
        
        // Reset drop zone
        hideLoading();
    }

    // Initialize when document is ready
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure Chart.js is loaded
        if (typeof Chart === 'undefined') {
            console.error('Chart.js library is required but not loaded');
            showError('Chart.js library is required for data visualization');
        } else {
            // Configure Chart.js defaults
            Chart.defaults.font.family = "'Inter', 'system-ui', 'sans-serif'";
            Chart.defaults.font.size = 12;
            Chart.defaults.color = '#374151';
        }
    });

    // CSS Animation classes (add to your stylesheet)
    const additionalCSS = `
    .fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .loading-spinner {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .drop-zone.border-accent {
        border-color: #6366F1 !important;
        background-color: rgba(99, 102, 241, 0.05) !important;
    }

    .gpu-accelerated {
        transform: translateZ(0);
        will-change: transform;
    }

    /* Chart containers with FIXED dimensions to prevent any expansion */
    #quizChart, #quizSummaryChart {
        width: 400px !important;
        height: 250px !important;
        max-width: 400px !important;
        max-height: 250px !important;
        min-width: 400px !important;
        min-height: 250px !important;
    }

    .glass-panel canvas {
        width: 400px !important;
        height: 250px !important;
        max-width: 400px !important;
        max-height: 250px !important;
    }

    /* Center the charts in their containers */
    .glass-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    #questionBreakdown::-webkit-scrollbar {
        width: 6px;
    }

    #questionBreakdown::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }

    #questionBreakdown::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
    }

    #questionBreakdown::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }
    `;

    function updateCalendar() {
    const now = new Date();
    
    // Get day, month, year
    const day = now.getDate();
    const month = now.toLocaleDateString('en-US', { month: 'long' });
    const year = now.getFullYear();
    const weekday = now.toLocaleDateString('en-US', { weekday: 'long' });
    
    // Update the elements
    document.getElementById('calendar-day').textContent = day.toString().padStart(2, '0');
    document.getElementById('calendar-month-year').textContent = `${month} ${year}`;
    document.getElementById('calendar-weekday').textContent = weekday;
    }

    // Update calendar immediately and then every minute
    updateCalendar();
    setInterval(updateCalendar, 60000);
    </script>
    <script src="../script/study-note.js"></script>
    <script src="../script/glossary.js"></script>
</body>
</html>